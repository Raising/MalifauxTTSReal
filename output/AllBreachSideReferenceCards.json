{"SaveName":"","GameMode":"","Date":"","VersionNumber":"","GameType":"","GameComplexity":"","Tags":[],"Gravity":0.5,"PlayArea":0.5,"Table":"","Sky":"","Note":"","Rules":"","TabStates":{},"LuaScript":"","LuaScriptState":"","XmlUI":"","ObjectStates":[{"GUID":"9500ca","Name":"Custom_Model_Bag","Transform":{"posX":-13.1160984,"posY":2.02876019,"posZ":10.3738079,"rotX":0.000001671053,"rotY":179.999344,"rotZ":-0.0000030625647,"scaleX":4.163286,"scaleY":1,"scaleZ":4.23},"Nickname":"NEVERBORN","Description":"","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1,"a":0},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"MaterialIndex":-1,"MeshIndex":-1,"CustomMesh":{"MeshURL":"http://cloud-3.steamusercontent.com/ugc/1666858152071991282/5C391C2599AE5F6972D6EFA7BFC04B41D6E821E3/","DiffuseURL":"","NormalURL":"","ColliderURL":"","Convex":false,"MaterialIndex":0,"TypeIndex":6,"CastShadows":true},"Bag":{"Order":0},"LuaScript":"","LuaScriptState":"","XmlUI":"","ContainedObjects":[{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mechanized Porkchop","Description":"Mechanized Porkchop\r\nFOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMechanized-Porkchop-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMechanized-Porkchop-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770184191/4C2050EF880E3E40209B574978A012599429554C/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Mechanized Porkchop\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gluttony","Description":"Gluttony\r\nCROSSROADS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGluttony-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGluttony-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770188709/CEA3F8EE06502291DF2DF39CBE273E28293A57CF/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Gluttony\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lucky Emissary","Description":"Lucky Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLucky-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLucky-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770195521/20FD955CF5B0656CC332EF337134B5A22EEFAE1E/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Lucky Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lucky Effigy","Description":"Lucky Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLucky-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLucky-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770191215/23E31A7857B8EE7B49ED7A97CC169330AE85E2FC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lucky Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dr. McMourning","Description":"Dr. McMourning\r\nEXPERIMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDr.-McMourning-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDr.-McMourning-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943384402/2F451303F2589B84268610D7CA494395FFBAB998/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dr. McMourning\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Zombie Chihuahua","Description":"Zombie Chihuahua\r\nEXPERIMENTAL,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FZombie-Chihuahua-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FZombie-Chihuahua-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943398332/1FFF4748BA3C2B688AFF44FE861B7DB2F9321F46/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Zombie Chihuahua\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sebastian","Description":"Sebastian\r\nEXPERIMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSebastian-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSebastian-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943393409/885CD8756520C8F868DD60756193C12D0570D0B3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sebastian\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rafkin","Description":"Rafkin\r\nEXPERIMENTAL,MORTUARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRafkin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRafkin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943402927/AFA061D734084050B0505FAB061A128DED98A790/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rafkin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nurse","Description":"Nurse\r\nASYLUM,EXPERIMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNurse-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNurse-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943406011/DB992D6A2488C6B58D8708F4C1ED33D4A5C8E10D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Nurse\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Little Gasser","Description":"Little Gasser\r\nEXPERIMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FLittle-Gasser-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FLittle-Gasser-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943408712/7B108AD798F078014F75308B62F07DB87E19A65D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Little Gasser\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Guild Autopsy","Description":"Guild Autopsy\r\nEXPERIMENTAL,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGuild-Autopsy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGuild-Autopsy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943411815/37C5DEF11C24BA6383E168927A6540E35F10845B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Guild Autopsy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Flesh Construct","Description":"Flesh Construct\r\nEXPERIMENTAL,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FFlesh-Construct-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FFlesh-Construct-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943415137/1169DB43D18D173363E5B8CED6284935DD159F77/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Flesh Construct\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Canine Remains","Description":"Canine Remains\r\nEXPERIMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCanine-Remains-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCanine-Remains-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943419484/77AAEA1D5DF45D90C4B12B5ECF81768C1FB88223/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Canine Remains\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rogue Necromancy","Description":"Rogue Necromancy\r\nEXPERIMENTAL,FORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRogue-Necromancy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRogue-Necromancy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943423233/A0E9EB694496DCA216ED38FD6BBF58CF792D39ED/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Rogue Necromancy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kentauroi","Description":"Kentauroi\r\nEXPERIMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FKentauroi-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FKentauroi-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943449576/8276CB382A78B6624A19D589C68FD354730E20D5/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Kentauroi\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Molly Squidpiddge","Description":"Molly Squidpiddge\r\nFORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMolly-Squidpiddge-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMolly-Squidpiddge-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946990284/A17C8420456E06D219E2DE93930932D19D2F4C30/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Molly Squidpiddge\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Necrotic Machine","Description":"Necrotic Machine\r\nFORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNecrotic-Machine-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNecrotic-Machine-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946994211/EFAFBD5A613AAF7C45C9CA7C4CDF8787B6677808/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Necrotic Machine\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Philip and the Nanny","Description":"Philip and the Nanny\r\nFORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FPhilip-and-the-Nanny-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FPhilip-and-the-Nanny-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946996743/416F376856EB6C6C83B747831282C4544D6D8265/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Philip and the Nanny\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Archie","Description":"Archie\r\nFORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FArchie-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FArchie-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=11\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947000418/8EA4C0B494D5409A2703645D39911A88AA00E15A/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Archie\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Forgotten Marshal","Description":"The Forgotten Marshal\r\nFORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FThe-Forgotten-Marshal-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FThe-Forgotten-Marshal-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947008880/CCE9390DCDAF17FDF0B8887475B77C1373EDADBD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Forgotten Marshal\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rabble Riser","Description":"Rabble Riser\r\nFORGOTTEN,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRabble-Riser-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRabble-Riser-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947012433/8498BF99626E646F3BEE4318CFA91B449EDBF070/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rabble Riser\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Night Terror","Description":"Night Terror\r\nFORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNight-Terror-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNight-Terror-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947014597/EF20D7CCFF57E2297733ABC26C97649EBCF84467/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Night Terror\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Crooligan","Description":"Crooligan\r\nFORGOTTEN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCrooligan-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCrooligan-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947017318/F98D708B0F49D09213960D07A4059BCBEA045264/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Crooligan\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Yan Lo","Description":"Yan Lo\r\nANCESTOR,RETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYan-Lo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYan-Lo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947077047/F54A7590C3F4B44B2AA52C29AF16AB16D9259656/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Yan Lo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Soul Porter","Description":"Soul Porter\r\nRETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSoul-Porter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSoul-Porter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947081553/F9169CFAF2B96AA455FAAD0ED1387BE19A3BA3BC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Soul Porter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Toshiro, The Daimyo","Description":"Toshiro, The Daimyo\r\nANCESTOR,RETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FToshiro-The-Daimyo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FToshiro-The-Daimyo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947086526/10A6D294C8A082ACC09C781788AE64A3DFD67C28/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Toshiro, The Daimyo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Manos, The Risen","Description":"Manos, The Risen\r\nANCESTOR,RETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FManos-The-Risen-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FManos-The-Risen-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947089716/AA5EA12DDFA59DE4E01D40FE05CD3D39AD507780/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Manos, The Risen\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sun Quiang","Description":"Sun Quiang\r\nRETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSun-Quiang-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSun-Quiang-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947104865/FD83BE99CFE1AB24280B6841AA845D1F685BACED/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sun Quiang\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Chiaki, The Beacon","Description":"Chiaki, The Beacon\r\nANCESTOR,RETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FChiaki-The-Beacon-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FChiaki-The-Beacon-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947108921/A5D2DC2F98A012C303CA44EE62D34E9DB53A26F0/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Chiaki, The Beacon\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Izamu, The Armor","Description":"Izamu, The Armor\r\nANCESTOR,RETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FIzamu-The-Armor-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FIzamu-The-Armor-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947111829/28DB7288E2DB80B286A12C74C045857F6DE31C47/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Izamu, The Armor\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Yin, The Penangalan","Description":"Yin, The Penangalan\r\nANCESTOR,RETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FYin-The-Penangalan-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FYin-The-Penangalan-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947115319/F9C160E8F5E72F6FEA7B33B2361CF395E84530C3/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Yin, The Penangalan\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gokudo","Description":"Gokudo\r\nRETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FGokudo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FGokudo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947121257/E2C8F0CB0DA98C6B338A5A9E93DCD21E2BA5A2DE/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Gokudo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Komainu","Description":"Komainu\r\nRETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKomainu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKomainu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=5\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947123559/CE628B78CD048E57F2E5C3F5FE13A337EC0D2A5E/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Komainu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ashigaru","Description":"Ashigaru\r\nRETAINER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FAshigaru-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FAshigaru-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947118511/2C835509734405DF814AF6340EDEB4E9F13500AF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ashigaru\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jack Daw","Description":"Jack Daw\r\nTORMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FJack-Daw-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FJack-Daw-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943252150/72064EC12F7EB0118AB25C7F790882642C84EFEA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Jack Daw\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lady Ligeia","Description":"Lady Ligeia\r\nTORMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FLady-Ligeia-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FLady-Ligeia-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943255705/7EF72BFC925D9C62F41653AE0AC358B8120D4D76/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lady Ligeia\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Guilty","Description":"Guilty\r\nTORMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FGuilty-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FGuilty-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943259513/9FE18303E6FBE4D9922163BB9A604408EC6B8348/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Guilty\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Montresor","Description":"Montresor\r\nTORMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMontresor-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMontresor-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943263390/0280D8ECADC38C725B8C9BB97F0D33182866EAA3/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Montresor\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jaakuna Ubume","Description":"Jaakuna Ubume\r\nTORMENTED,URAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FJaakuna-Ubume-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FJaakuna-Ubume-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943267101/36BDF2B21880180567F4B36EDD9A5F3ED38FAC80/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Jaakuna Ubume\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Drowned","Description":"Drowned\r\nTORMENTED,URAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDrowned-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDrowned-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943272712/699E92F38E1C6315DB14FE06B6DC2C92D1E31C2D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Drowned\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hanged","Description":"Hanged\r\nTORMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FHanged-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FHanged-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943278921/2BE8E676F604128D8BB78CE0EA031C69B6D21E6C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hanged\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Crooked Man","Description":"Crooked Man\r\nTORMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCrooked-Man-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCrooked-Man-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943282264/A16257C54C18B7DB50CB34B5A0F454CC4229FE42/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Crooked Man\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dead Outlaw","Description":"Dead Outlaw\r\nBANDIT,TORMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDead-Outlaw-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDead-Outlaw-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942885571/8D382164785AB38EDE1BD9A5615AF6E88A6A9ABA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dead Outlaw\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Prof. Von Schtook","Description":"Prof. Von Schtook\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FProf.-Von-Schtook-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FProf.-Von-Schtook-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946914387/C85ACB4F2B4D84F71DE7B6C1C3E522DCD28D1BB8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Prof. Von Schtook\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Research Assistant","Description":"Research Assistant\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FResearch-Assistant-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FResearch-Assistant-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946919066/D32F551A9CD53219F9D1EA26909DAB04B749BB32/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Research Assistant\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Anna Lovelace","Description":"Anna Lovelace\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FAnna-Lovelace-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FAnna-Lovelace-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946922040/F3A685776B334C26F7FF165AE4047388065AB0F3/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Anna Lovelace\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Valedictorian","Description":"The Valedictorian\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FThe-Valedictorian-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FThe-Valedictorian-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946925799/E7443977B39AD4E4064F9897F99FA4FC4E0EC8D0/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"The Valedictorian\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Undergraduate","Description":"Undergraduate\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FUndergraduate-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FUndergraduate-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946929303/04B11AED76ECECB8304304BAECB4EE58E954A9AE/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Undergraduate\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Student of Sinew","Description":"Student of Sinew\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FStudent-of-Sinew-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FStudent-of-Sinew-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946932691/D6989A7982B8DE9CD34E57805473B6742BAA8BA4/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Student of Sinew\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Student of Steel","Description":"Student of Steel\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FStudent-of-Steel-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FStudent-of-Steel-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946937553/B4AF630EE82977E464F2BC5C5CA743B93AFD252C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Student of Steel\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Student of Viscera","Description":"Student of Viscera\r\nTRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FStudent-of-Viscera-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FStudent-of-Viscera-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946940516/ED0ED15260FC6700685222A35DAEA32167A1957C/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Student of Viscera\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Necropunk","Description":"Necropunk\r\nAMALGAM,TRANSMORTIS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNecropunk-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FNecropunk-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942992805/340450526328FB27E856DB45F0065AC508956583/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Necropunk\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Reva Cortinas","Description":"Reva Cortinas\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FReva-Cortinas-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FReva-Cortinas-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946953758/0DA80F8335ABDC3C814EEE842D76ECB8628FA7A6/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Reva Cortinas\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Corpse Candle","Description":"Corpse Candle\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCorpse-Candle-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCorpse-Candle-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946956478/A0688706878A62FA51AD47DE85CFA372AA973979/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Corpse Candle\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Vincent St. Clair","Description":"Vincent St. Clair\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FVincent-St.-Clair-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FVincent-St.-Clair-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946958948/6A5C19BBD1E386B4314EB750A36204E0FBED9503/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Vincent St. Clair\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Restless Spirit","Description":"Restless Spirit\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRestless-Spirit-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRestless-Spirit-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946961285/AAC00E726795EE57193B50C2A4ED7E324F7FEBD3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Restless Spirit\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mourner","Description":"Mourner\r\nREDCHAPEL,REVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMourner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMourner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944055961/F55429CDA0717D658285EB768B3E9D9F38AF5155/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mourner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Draugr","Description":"Draugr\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDraugr-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDraugr-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946975727/B0D7E2F69FB08413A8BB06CDCC57EE57B5D7180B/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Draugr\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shieldbearer","Description":"Shieldbearer\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FShieldbearer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FShieldbearer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946969789/1D6149C6E17C5A51DCF9EF6F362495E82609EB16/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Shieldbearer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lampad","Description":"Lampad\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FLampad-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FLampad-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946972473/CB018B632D5079D4241299332F2B309D621BCC30/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Lampad\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wanyudo","Description":"Wanyudo\r\nREVENANT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FWanyudo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FWanyudo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362946979386/CAB3CD74549D65E6DB468F451A4731BE980F934E/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Wanyudo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kirai Ankoku","Description":"Kirai Ankoku\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FKirai-Ankoku-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FKirai-Ankoku-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947035514/AA96F63B32AD78B97ABAF5B023BC10A5B389BC79/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Kirai Ankoku\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ikiryo","Description":"Ikiryo\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FIkiryo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FIkiryo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947039093/83A7C73058A650384E912F2552840B91A2FBAC7F/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Ikiryo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Datsue Ba","Description":"Datsue Ba\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDatsue-Ba-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDatsue-Ba-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947043221/1FCFD10BCE19FD165071EFD14A0F083E936B5D5E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Datsue Ba\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lost Love","Description":"Lost Love\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FLost-Love-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FLost-Love-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947046435/BE9F5799FE22976E6166C2660814384F8389C9B7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lost Love\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shikome","Description":"Shikome\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FShikome-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FShikome-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947050885/E761204C7CF0680AECB4C41EF3170A953DC38DFE/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Shikome\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Onryo","Description":"Onryo\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FOnryo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FOnryo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947058096/FCB02D81456BE00267F17141B692687397247A4F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Onryo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Seishin","Description":"Seishin\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSeishin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSeishin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947061905/BCB5644438AFC6D85764ABE02FE2482B5B9EBE82/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Seishin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Goryo","Description":"Goryo\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGoryo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGoryo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947053296/16F4C0A0CC0FF18B72519A7B3D58F54C41D353CC/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Goryo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gaki","Description":"Gaki\r\nURAMI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGaki-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGaki-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947064856/71331AAB3ED235ED78518B1C1A96F94016FBF4EA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Gaki\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mei Feng","Description":"Mei Feng\r\nFOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMei-Feng-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMei-Feng-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434452161/CD2D6BCED294092F8DFD574E311D160049FA8088/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mei Feng\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Forgeling","Description":"Forgeling\r\nFOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FForgeling-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FForgeling-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434455959/C99061F79EAD360B8648A648D309E49D816418A5/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Forgeling\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kang","Description":"Kang\r\nFOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKang-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKang-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434459482/AFA76FC1D1F267D4F3608EF12F35B883CF93AF75/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Kang\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rail Worker","Description":"Rail Worker\r\nFOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FRail-Worker-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FRail-Worker-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434461941/BAE341AB4EFA098C298890D18F2C377F26D895F6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rail Worker\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Metal Gamin","Description":"Metal Gamin\r\nELEMENTAL,FOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMetal-Gamin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMetal-Gamin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523797940/03F0B1F56C9C6407DCB59D78FA27DA1E61F7B6CA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Metal Gamin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Metal Golem","Description":"Metal Golem\r\nELEMENTAL,FOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMetal-Golem-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMetal-Golem-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523801519/B538D404D21E3AD57D5589ED2175FC06B951D746/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Metal Golem\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Neil Henry","Description":"Neil Henry\r\nFOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FNeil-Henry-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FNeil-Henry-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434475277/31EFC65AE5874A67DE0F65A8F3C4BD5F67169E4B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Neil Henry\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Willie","Description":"Willie\r\nFOUNDRY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FWillie-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FWillie-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434477695/AC76B80AF9476BC0250AC813BAF47381DCAE8CDE/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Willie\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Survivor","Description":"Survivor\r\nFOUNDRY,TRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSurvivor-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSurvivor-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768530847/0B27CC4422D36D0DA0DF5E1E3A25DA4DABF0AB1E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Survivor\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sparks LeBlanc","Description":"Sparks LeBlanc\r\nFOUNDRY,TRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSparks-LeBlanc-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSparks-LeBlanc-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768521379/D339422861FFF176041AD71D573DEB8390FE3A6E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sparks LeBlanc\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jakob Lynch","Description":"Jakob Lynch\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FJakob-Lynch-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FJakob-Lynch-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=11\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434406530/83B1EFBB213855EF4F5BEA1CB75C41FFC62388EF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Jakob Lynch\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hungering Darkness","Description":"Hungering Darkness\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FHungering-Darkness-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FHungering-Darkness-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434410248/806F7127C81E957DF045B6CD505B4CC82CD531FF/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Hungering Darkness\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gwyneth Maddox","Description":"Gwyneth Maddox\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FGwyneth-Maddox-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FGwyneth-Maddox-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434414240/009E77D2CB9F9DB871CB9043D4BF8DF322F6B8B1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Gwyneth Maddox\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kitty Dumont","Description":"Kitty Dumont\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKitty-Dumont-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKitty-Dumont-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434419951/0689818F4175690D9C88F9AA67C2D030BFD52780/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Kitty Dumont\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mr. Graves","Description":"Mr. Graves\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMr.-Graves-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMr.-Graves-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434422900/554F23198CB84B5865B7029AF739257EE9FB1492/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Mr. Graves\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mr. Tannen","Description":"Mr. Tannen\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMr.-Tannen-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMr.-Tannen-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434427645/BD72258D28F5F2DDCAC3F20D98CF4667280EA6EE/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mr. Tannen\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Beckoner","Description":"Beckoner\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FBeckoner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FBeckoner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434431032/DFA7C6D5C9E0437ECD48940E303DD8A1DC0D21B6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Beckoner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Illuminated","Description":"Illuminated\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FIlluminated-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FIlluminated-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434433500/28E58195292D0E78967ACF4474CC15B7900698CB/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Illuminated\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Depleted","Description":"Depleted\r\nHONEYPOT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FDepleted-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FDepleted-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434437543/603C659B2B257E43C50430E4783ADE6D3EA4807E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Depleted\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Misaki Katanaka","Description":"Misaki Katanaka\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMisaki-Katanaka-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMisaki-Katanaka-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947696419/9C3C75146D9C545504AF7B216BD832C1BF9D73DA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Misaki Katanaka\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shang","Description":"Shang\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShang-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShang-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947699952/33B1A0A2A7484C993F1924E0F6C29ECA0DEE9FFC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Shang\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Yamaziko","Description":"Yamaziko\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYamaziko-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYamaziko-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947703379/03D10EC7542D3AD60172BE0D3601DB9CC3233876/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Yamaziko\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ototo","Description":"Ototo\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FOtoto-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FOtoto-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947707642/141DD83D22FBDA0AAD75F48E33F26173A9BB323C/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Ototo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Minako Rei","Description":"Minako Rei\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMinako-Rei-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FMinako-Rei-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947712551/E651728BE03B0C69EC9EE52845319CCB95B5F1EA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Minako Rei\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Katanaka Crime Boss","Description":"Katanaka Crime Boss\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKatanaka-Crime-Boss-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKatanaka-Crime-Boss-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947716547/942DD450092D0335CD89D5D94EDC9E283FAB21C9/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Katanaka Crime Boss\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Katanaka Sniper","Description":"Katanaka Sniper\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKatanaka-Sniper-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKatanaka-Sniper-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947720127/6F4BE60FA699A9A804BD71B96FED6A566A00C900/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Katanaka Sniper\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Torakage","Description":"Torakage\r\nLAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTorakage-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTorakage-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947723666/1BDB4F78CEE8A3EE0D41C08EEE6D1B7580C9E706/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Torakage\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Thunder Archer","Description":"Thunder Archer\r\nLAST BLOSSOM,MONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FThunder-Archer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FThunder-Archer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947659482/D769421FF17804616B7657DEF272D4DADEB38A37/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Thunder Archer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wokou Raider","Description":"Wokou Raider\r\nBANDIT,LAST BLOSSOM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FWokou-Raider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FWokou-Raider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942894216/DA49DB8DA85E592B9D35205789F25DFA84EF8147/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Wokou Raider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shenlong","Description":"Shenlong\r\nMONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShenlong-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShenlong-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947644479/250CA56B06622D5D383627EA3E481B5AD8998E82/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Shenlong\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Aspiring Student","Description":"Aspiring Student\r\nMONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAspiring-Student-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAspiring-Student-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947650198/0ED66E49984810AB2EE8AA7BC723486DC4645ECC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Aspiring Student\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sensei Yu","Description":"Sensei Yu\r\nMONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSensei-Yu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSensei-Yu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947653981/D96657751BE50C8CFF073B0304407DE012F972A5/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sensei Yu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Charm Warder","Description":"Charm Warder\r\nMONK,QI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FCharm-Warder-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FCharm-Warder-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947664494/A0A255CDFCECBD47AC03F960845283C3154B8DDF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Charm Warder\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wandering River Monk","Description":"Wandering River Monk\r\nMONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FWandering-River-Monk-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FWandering-River-Monk-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947668314/586C73EEA95FB4FF87CC2D5F4C43464F022B33D1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Wandering River Monk\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Low River Monk","Description":"Low River Monk\r\nMONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLow-River-Monk-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLow-River-Monk-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947673790/803A3A2A61BDC8436472A1846967E99DC206EFAD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Low River Monk\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lotus Eater","Description":"Lotus Eater\r\nMONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLotus-Eater-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLotus-Eater-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947678190/50CF6438FFA1547333C0DAD164E3C32AA10BC644/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lotus Eater\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Fermented River Monk","Description":"Fermented River Monk\r\nMONK,TRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FFermented-River-Monk-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FFermented-River-Monk-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768602618/437D9A2563EF7F202BA95F842952534163431129/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Fermented River Monk\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"High River Monk","Description":"High River Monk\r\nMONK","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FHigh-River-Monk-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FHigh-River-Monk-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947684124/6B744C0F94B6913B6092BEBE257BDFAF5E516610/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"High River Monk\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Asami Tanaka","Description":"Asami Tanaka\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAsami-Tanaka-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAsami-Tanaka-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434351156/359A18094F28D05DB71BF73D74BCB5D0E100A271/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Asami Tanaka\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Amanjaku","Description":"Amanjaku\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAmanjaku-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAmanjaku-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434358804/E3F1448D179C4C80E28FFCB8DB110E5B080B9F5B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Amanjaku\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ama No Zako","Description":"Ama No Zako\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAma-No-Zako-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FAma-No-Zako-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434363291/DA0EC0B498B59AF383FD63955550C7141B9F1DF3/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Ama No Zako\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ohaguro Bettari","Description":"Ohaguro Bettari\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FOhaguro-Bettari-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FOhaguro-Bettari-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434366155/35DA690583AA292671A0BB3176134552640F87B7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ohaguro Bettari\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kamaitachi","Description":"Kamaitachi\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKamaitachi-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKamaitachi-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434372113/125B1EF993AF523344E4754664E3645A84448497/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Kamaitachi\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jorogumo","Description":"Jorogumo\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FJorogumo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FJorogumo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434375052/FEAEB87CF90971B2A71016980A8A844FC761BEF9/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Jorogumo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Katashiro","Description":"Katashiro\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKatashiro-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKatashiro-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434378511/1A8C6E66462F61528C4609F733E983073ED6D6E4/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Katashiro\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Obsidian Oni","Description":"Obsidian Oni\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FObsidian-Oni-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FObsidian-Oni-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434382204/3892C8E0AFB919EE0E70B22447E5AF455E4DA5E6/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Obsidian Oni\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Akaname","Description":"Akaname\r\nONI,TRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FAkaname-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FAkaname-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768599019/8EAFB5E65A837722FB006D9ED48E38B41011A25B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Akaname\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Tengu","Description":"Tengu\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTengu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTengu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434390405/1D342C99E39C191F7D38114473846C70EBB51ED0/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Tengu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Yokai","Description":"Yokai\r\nONI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYokai-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYokai-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434394328/C2125DB89A9489C0577B4F5D8C9C71418AD1C083/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Yokai\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Youko Hamasaki","Description":"Youko Hamasaki\r\nQI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYouko-Hamasaki-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYouko-Hamasaki-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947795000/3F539D17233425480E4CF03F04BD423E4A6C8E2C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Youko Hamasaki\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Chiyo Hamasaki","Description":"Chiyo Hamasaki\r\nQI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FChiyo-Hamasaki-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FChiyo-Hamasaki-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947801195/56892A12D1723EF4E154E68E1020B8A2903BD1A1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Chiyo Hamasaki\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bill Algren","Description":"Bill Algren\r\nQI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FBill-Algren-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FBill-Algren-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947806132/F75DB1782F409F509D27C5B61A988747EABB73DC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bill Algren\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hinamatsu","Description":"Hinamatsu\r\nPUPPET,QI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FHinamatsu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FHinamatsu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767445810/467994287817795571AA5C191A67B7539758B314/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Hinamatsu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bunraku","Description":"Bunraku\r\nPUPPET,QI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FBunraku-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FBunraku-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947815539/41D3BAB8002B5DF0BF0F42ADDAE6BDE97A585C7F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bunraku\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kabuki Warrior","Description":"Kabuki Warrior\r\nQI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKabuki-Warrior-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKabuki-Warrior-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947819919/8E7669B90C66AF3DF9CBD5E5A54812619A54A1B8/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Kabuki Warrior\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Geisha","Description":"Geisha\r\nQI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FGeisha-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FGeisha-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947822549/72DB9B58779BED039D2E51CA3CAEF70C7F9FE359/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Geisha\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kunoichi","Description":"Kunoichi\r\nQI AND GONG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKunoichi-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FKunoichi-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947827160/D50E5E94E50EE0889D7A2F0684315DC7374E2EFB/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Kunoichi\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lucas McCabe, Relic Hunter","Description":"Lucas McCabe, Relic Hunter\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLucas-McCabe-Relic-Hunter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLucas-McCabe-Relic-Hunter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434497356/F4FA466FB2C47B7E7479AB9E2C4ED7547E84FEAD/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Lucas McCabe, Relic Hunter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lucas McCabe, Dismounted Hunter","Description":"Lucas McCabe, Dismounted Hunter\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLucas-McCabe-Dismounted-Hunter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLucas-McCabe-Dismounted-Hunter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434501940/1D347E6CD45B627C8EB52DDA873323938CCC51DC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lucas McCabe, Dismounted Hunter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Luna","Description":"Luna\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLuna-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLuna-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434507661/156B5CB3C8D7551B88F00A09253257CDF2D6EEE2/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Luna\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jessie Halliday","Description":"Jessie Halliday\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FJessie-Halliday-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FJessie-Halliday-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434512611/C29A1D8FD9EF80D888A7B21FBE8DF4D3C7202D30/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Jessie Halliday\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sidir Alchibal","Description":"Sidir Alchibal\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSidir-Alchibal-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSidir-Alchibal-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434517223/F2EE7BA1CD9AFC698E9FB841D4258CF224E99B25/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Sidir Alchibal\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Desper LaRaux","Description":"Desper LaRaux\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FDesper-LaRaux-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FDesper-LaRaux-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434519841/B7E27BE82E0716B1E32615A57D2567712B3A30CE/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Desper LaRaux\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Huckster","Description":"Huckster\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FHuckster-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FHuckster-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434523125/ADA03FDB70E4098222FE7385B02E4F30E1FF4017/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Huckster\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ruffian","Description":"Ruffian\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FRuffian-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FRuffian-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434526185/66607B58F9E2CD1237C056D3A3FB88816DABE110/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ruffian\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Cryptologist","Description":"Cryptologist\r\nWASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCryptologist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCryptologist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434529023/9C0C5EB04BE20F61989636E71883078D64E793BB/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Cryptologist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rough Rider","Description":"Rough Rider\r\nFRONTIER,WASTREL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FRough-Rider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FRough-Rider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434538108/9A09C5E4F7CC1132216EB3AFF7A89E6CF171CB40/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Rough Rider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Leveticus","Description":"Leveticus\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FLeveticus-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FLeveticus-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942941254/2D172CFD90D70AAD8D4C4E98F5823C7B961BDA09/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Leveticus\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hollow Waif","Description":"Hollow Waif\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHollow-Waif-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHollow-Waif-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942946184/F7E92C30FC0C140CA15C28B779BC0A27DF60C8C7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hollow Waif\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Marlena Webster","Description":"Marlena Webster\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMarlena-Webster-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMarlena-Webster-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942948832/8B770D729E19A86763CD7EBF7681D7576A3E05F8/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Marlena Webster\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dust Storm","Description":"Dust Storm\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDust-Storm-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDust-Storm-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=5\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942968194/AA0106197DF0EC401F2805A1B0DBBEC7FB5F5DFF/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Dust Storm\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Desolation Engine","Description":"Desolation Engine\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDesolation-Engine-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDesolation-Engine-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942972782/63352C01DAEE610C38C3179AE99FF935B1071243/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Desolation Engine\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ashes and Dust","Description":"Ashes and Dust\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAshes-and-Dust-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAshes-and-Dust-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942978341/CB7D02A84ED2F293DC83193DD47787C60D840608/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Ashes and Dust\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ashen Core","Description":"Ashen Core\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAshen-Core-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAshen-Core-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942983135/6177122B518DC02A3F13E2B3BD73190DDC2822BA/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Ashen Core\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Abomination","Description":"Abomination\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAbomination-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAbomination-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942987021/28A01399C19FDD46050601F2C13CB88FB7CA55A5/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Abomination\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Scavenger","Description":"Scavenger\r\nAMALGAM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FScavenger-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FScavenger-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1755812632520565827/BE3C4EB29B14347DEAE769784BDC41531EB4F6B7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Scavenger\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Parker Barrows","Description":"Parker Barrows\r\nBANDIT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FParker-Barrows-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FParker-Barrows-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=14\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942834738/BDEFD7A9FFE9641CB3E280A209C528D4D30731FF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Parker Barrows\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Doc Mitchell","Description":"Doc Mitchell\r\nBANDIT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDoc-Mitchell-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDoc-Mitchell-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942857930/3EEC4BB9C09EEAB4B82082C23A8DE7E2C7B8BEA9/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Doc Mitchell\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mad Dog Brackett","Description":"Mad Dog Brackett\r\nBANDIT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMad-Dog-Brackett-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMad-Dog-Brackett-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942864035/62D3CCD3EAF3415B18AC702B8C79B2EDD8566B62/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mad Dog Brackett\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sue","Description":"Sue\r\nBANDIT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FSue-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FSue-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942871466/862C80E03720E6B43EFA4733F2B3DE2B002EB04B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sue\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Benny Wolcomb","Description":"Benny Wolcomb\r\nBANDIT,PLAGUE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBenny-Wolcomb-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBenny-Wolcomb-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942880132/67F24C9ECBA92A9B8E909FB80A8D4FDB00BB67DD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Benny Wolcomb\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Convict Gunslinger","Description":"Convict Gunslinger\r\nBANDIT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FConvict-Gunslinger-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FConvict-Gunslinger-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942874551/C08873F1CC45458EDF158F6E819B13191F09A07F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Convict Gunslinger\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bandido","Description":"Bandido\r\nBANDIT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBandido-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBandido-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362942890036/B6170B02CA2FB16B30AABBC41D7D11F6D9423914/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bandido\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bayou Smuggler","Description":"Bayou Smuggler\r\nBANDIT,INFAMOUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBayou-Smuggler-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBayou-Smuggler-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770173927/BF43B3BEDB2C986203F45CF198A9D7B5011D373B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bayou Smuggler\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Von Schill","Description":"Von Schill\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVon-Schill-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVon-Schill-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943111919/3E319A84696FC7979538E9B61F9125F7D9E2BEBC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Von Schill\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Steam Trunk","Description":"Steam Trunk\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FSteam-Trunk-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FSteam-Trunk-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943126184/063713F9724A67492463D8E328090FDEE9BD289B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Steam Trunk\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hannah Lovelace","Description":"Hannah Lovelace\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHannah-Lovelace-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHannah-Lovelace-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=2.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943130359/B58CCA116BA6FBF33F65180B77E3678EF3F29DDB/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Hannah Lovelace\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lazarus","Description":"Lazarus\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FLazarus-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FLazarus-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943135684/185DF06DC70CDFA9077D04A8A4CE40385E4CDC72/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Lazarus\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Arik Schöttemer","Description":"Arik Schöttemer\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FArik-Schottemer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FArik-Schottemer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943140716/1783D30C12F56868C9E6235B0E6969B5910E4BC1/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Arik Schöttemer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Drachen Trooper","Description":"Drachen Trooper\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDrachen-Trooper-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDrachen-Trooper-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943145462/6D54F993C6A67DD0C8599401D8423F50011A52AF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Drachen Trooper\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Freikorpsmann","Description":"Freikorpsmann\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorpsmann-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorpsmann-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943150501/D3D0B1EEB84798D98E20601BE917277AF3270907/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Freikorpsmann\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Freikorps Librarian","Description":"Freikorps Librarian\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorps-Librarian-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorps-Librarian-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943156147/1B64184F83E573E8426055642A771FA61A19CBE7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Freikorps Librarian\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Freikorps Scout","Description":"Freikorps Scout\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorps-Scout-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorps-Scout-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.9\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943166492/B3797DBD5A219349126DF8B2CD22C776936BC303/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Freikorps Scout\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Freikorps Engineer","Description":"Freikorps Engineer\r\nFREIKORPS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorps-Engineer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FFreikorps-Engineer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943163374/ADF7A006290EBB4AB9F34BB3272E5AF166ABB15E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Freikorps Engineer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Captain Zipp","Description":"Captain Zipp\r\nINFAMOUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FCaptain-Zipp-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FCaptain-Zipp-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770148880/5BBA699D173BEB1C9EFDB70E4E676BF799240F7B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Captain Zipp\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Earl Burns","Description":"Earl Burns\r\nINFAMOUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FEarl-Burns-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FEarl-Burns-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770152302/24A2EF385132F0D725E18C6A7FC453EDB226EF2D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Earl Burns\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Burt Jebsen","Description":"Burt Jebsen\r\nINFAMOUS,WIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBurt-Jebsen-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBurt-Jebsen-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770128873/3551365E75FE1C6A9F830A97D0310E38B2ADD6D7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Burt Jebsen\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Merris LaCroix","Description":"Merris LaCroix\r\nINFAMOUS,KIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMerris-LaCroix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMerris-LaCroix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770007326/9404ECA53D6DC5777905949D44A1793D3E054C1F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Merris LaCroix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The First Mate","Description":"The First Mate\r\nINFAMOUS,SWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-First-Mate-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-First-Mate-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767392402/7CB48971ED482F4780DFF6D28F535651B39CB8E4/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"The First Mate\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mancha Roja","Description":"Mancha Roja\r\nINFAMOUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMancha-Roja-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMancha-Roja-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770163290/C16C0CC66CCEAC8F151388049FCCC3888CFA2CEC/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Mancha Roja\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Iron Skeeter","Description":"Iron Skeeter\r\nINFAMOUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FIron-Skeeter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FIron-Skeeter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770166751/BB7DF9FACE5F3084A5055EEC2C5776870C1D3331/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Iron Skeeter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wrastler","Description":"Wrastler\r\nINFAMOUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWrastler-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWrastler-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770170217/452B31D93F2D8D04DAA8D9E53F432714C637673E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Wrastler\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Flying Piglet","Description":"Flying Piglet\r\nINFAMOUS,WIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FFlying-Piglet-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FFlying-Piglet-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770135876/6D7D5C7E74D57CB32076EEAA2767F8E94B0C64AB/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Flying Piglet\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gracie","Description":"Gracie\r\nINFAMOUS,PIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGracie-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGracie-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770049622/52FCB2E196BC5640F2C74DD85175BA35ECB0A1D5/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Gracie\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Viktoria Chambers B","Description":"Viktoria Chambers B\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FViktoria-Chambers-front-1.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FViktoria-Chambers-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943190184/A5ACD40BB47E1E01A2C26FC34F4A965B144539D9/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Viktoria Chambers B\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Viktoria Chambers A","Description":"Viktoria Chambers A\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FViktoria-Chambers-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FViktoria-Chambers-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943186002/244DE652E59DB0FBFF15FB1191A83CEBA603F6DB/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Viktoria Chambers A\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Vanessa Chambers","Description":"Vanessa Chambers\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVanessa-Chambers-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVanessa-Chambers-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943194397/D7F9546D2943A1E5BA6CD28B5CEF9854A77DE1E6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Vanessa Chambers\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Taelor","Description":"Taelor\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FTaelor-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FTaelor-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943197641/61362C42D035DC7532DD38AD5BDF6EAAF0BEBDC1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Taelor\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Student of Conflict","Description":"Student of Conflict\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FStudent-of-Conflict-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FStudent-of-Conflict-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943201315/4E161E4787CA8A225A6F9B5F1150BEA8D6FF2A11/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Student of Conflict\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ronin","Description":"Ronin\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FRonin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FRonin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943203853/C733CC3CBB6B7F1C7EA10691246B7CCA7C55CC53/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ronin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Desperate Mercenary","Description":"Desperate Mercenary\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDesperate-Mercenary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FDesperate-Mercenary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943207945/3ED17FDB63B6B08F40DB68893DEF4A1AF7AEC4C9/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Desperate Mercenary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bishop","Description":"Bishop\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBishop-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBishop-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943211433/B35CA0A58F67A27F50636A6CAC707347B364C195/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bishop\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Big Jake","Description":"Big Jake\r\nMERCENARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBig-Jake-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBig-Jake-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943216492/5B4880402964CF7CE95F12579E3C7E0B72519755/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Big Jake\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Tara","Description":"Tara\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FTara-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FTara-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=2.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943005054/5D22FF16989D0E1DFAF0AA0A6CA46F0E5879EF12/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Tara\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Karina","Description":"Karina\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FKarina-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FKarina-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943009879/E17041FC99B3FD5254DF59D97EC8D868F6C4B8DA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Karina\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Aionus","Description":"Aionus\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAionus-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FAionus-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943013806/73B2EA451D891D9E215882621274B65BB8C54C98/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Aionus\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Nothing Beast","Description":"The Nothing Beast\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FThe-Nothing-Beast-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FThe-Nothing-Beast-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943018254/46F428C3E6D47A94513507EE5D9DB91EF03F0D96/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"The Nothing Beast\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Talos","Description":"Talos\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FTalos-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FTalos-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943036816/E15A1F78A850DC684281699859E992CECEBE6411/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Talos\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Scion of the Void","Description":"Scion of the Void\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FScion-of-the-Void-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FScion-of-the-Void-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943041293/8F58A1DAE35E87F6316411E71CA1EDF26E871B0B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Scion of the Void\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Void Wretch","Description":"Void Wretch\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVoid-Wretch-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVoid-Wretch-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943045885/C187F41A1711632F85B285AAB839BEEAB319FED1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Void Wretch\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Void Hunter","Description":"Void Hunter\r\nOBLITERATION","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVoid-Hunter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FVoid-Hunter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943049277/621A9A56D380A6C4017B1A5CAC87404A7BC94C76/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Void Hunter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hamelin","Description":"Hamelin\r\nPLAGUE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHamelin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHamelin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943067368/68CFBE8FA3336FCB5A9AB73C6F19368E541CC811/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hamelin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Stolen","Description":"Stolen\r\nPLAGUE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FStolen-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FStolen-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943075546/C8FD79FDADC71927CC29FA9638BBB2F12FD444ED/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Stolen\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nix","Description":"Nix\r\nPLAGUE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FNix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FNix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943072042/9ECF6B25C0EAE2C15CC567E3C8B0D59E0BC69266/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Nix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Obedient Wretch","Description":"Obedient Wretch\r\nPLAGUE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FObedient-Wretch-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FObedient-Wretch-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943078432/CD02A404C64973149440A3B627CEBA892E3C49F3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Obedient Wretch\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rat Catcher","Description":"Rat Catcher\r\nPLAGUE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FRat-Catcher-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FRat-Catcher-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943084229/68C16005FB55ACA29124DB0039AD15352BCC282F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rat Catcher\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rat King","Description":"Rat King\r\nPLAGUE,VERMIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FRat-King-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FRat-King-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.9\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943087411/56609ADFC3ED4797CF0EEF6E2B4DBC928514FCB0/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Rat King\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Malifaux Rat","Description":"Malifaux Rat\r\nPLAGUE,VERMIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMalifaux-Rat-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMalifaux-Rat-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943090815/8D4CF3E090E5D2E01AB34A5847337F7FF314BE8C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Malifaux Rat\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Winged Plague","Description":"Winged Plague\r\nPLAGUE,VERMIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FWinged-Plague-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FWinged-Plague-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1752435445911490461/2C450F4BFD4347582FE73E132B76DA0ADA21DA2B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Winged Plague\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Som'er Teeth Jones","Description":"Som'er Teeth Jones\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSom'er-Teeth-Jones-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSom'er-Teeth-Jones-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768431272/D6ED332BC0431225849C46D01BAA11D73AFA3290/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Som'er Teeth Jones\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Skeeter","Description":"Skeeter\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSkeeter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSkeeter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768445511/48F6467C4A3FA0295FAFB4FE31DFBF7C538DF37A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Skeeter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lenny Jones","Description":"Lenny Jones\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLenny-Jones-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLenny-Jones-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768451334/0B66F0A2D8724ECC6850DA522A140088BFC9C3F8/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Lenny Jones\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Old Cranky","Description":"Old Cranky\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOld-Cranky-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOld-Cranky-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768457172/12DD3A41BA366353B15680F2A7A5D27A0F9401D6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Old Cranky\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Georgy and Olaf","Description":"Georgy and Olaf\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGeorgy-and-Olaf-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGeorgy-and-Olaf-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768462432/322C19B231D76D6015B26E141B82E45954E6E944/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Georgy and Olaf\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Spit Hog","Description":"Spit Hog\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSpit-Hog-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSpit-Hog-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768466400/C0E81A1ED97F8294657614563276D4757907BD6D/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Spit Hog\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Good Ol' Boy","Description":"Good Ol' Boy\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGood-Ol'-Boy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGood-Ol'-Boy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768470925/CCE545FDEA76D7F8C558C3758780074ADECB185F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Good Ol' Boy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gremlin Crier","Description":"Gremlin Crier\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGremlin-Crier-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGremlin-Crier-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768475330/CD2833A040ABBB39F8BD4E5DD7BA0902AD386FA5/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Gremlin Crier\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Banjonista","Description":"Banjonista\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBanjonista-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBanjonista-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768479250/7362C44052C9C7713669CDD352DBD963E553B0C2/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Banjonista\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bayou Gremlin","Description":"Bayou Gremlin\r\nBIG HAT","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBayou-Gremlin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBayou-Gremlin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768482469/DC7284E43B32880D74DBE31D4401C0558BB2F776/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bayou Gremlin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ophelia LaCroix","Description":"Ophelia LaCroix\r\nKIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOphelia-LaCroix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOphelia-LaCroix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259769972940/F50ACDF42CCAD370F535FF3F2117C54ECD254024/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ophelia LaCroix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Young LaCroix","Description":"Young LaCroix\r\nKIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FYoung-LaCroix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FYoung-LaCroix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259769978834/DA38D544B55F53B6A3F0B090B67AE3D175CDF078/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Young LaCroix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"LaCroix Raider","Description":"LaCroix Raider\r\nKIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLaCroix-Raider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLaCroix-Raider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259769981990/DAF39E8BA5D65E1E0779A22C1334309E03C99193/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"LaCroix Raider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sammy LaCroix","Description":"Sammy LaCroix\r\nKIN,WIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSammy-LaCroix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSammy-LaCroix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259769986633/C0A34FBA44CFC8097416348C9E574C645EDC187A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sammy LaCroix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Francois LaCroix","Description":"Francois LaCroix\r\nKIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FFrancois-LaCroix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FFrancois-LaCroix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259769991322/0D83D4F5BDAA0168737451522C9048C0E248558B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Francois LaCroix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rami LaCroix","Description":"Rami LaCroix\r\nKIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FRami-LaCroix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FRami-LaCroix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259769995938/6CADB23F9AC82B01B9ED04B68063CD15A501A2CC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rami LaCroix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Raphael LaCroix","Description":"Raphael LaCroix\r\nKIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FRaphael-LaCroix-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FRaphael-LaCroix-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770000229/348A6A5575E560702659CCBB36DB1AE85BD27397/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Raphael LaCroix\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Pere Ravage","Description":"Pere Ravage\r\nKIN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPere-Ravage-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPere-Ravage-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770003475/81A0EE1F78399F1EBB67F6E1449E54DF511A370D/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Pere Ravage\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ulix Turner","Description":"Ulix Turner\r\nSOOEY,PIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FUlix-Turner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FUlix-Turner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770030293/323077E2601A551AD67F273852A22061B4CBC9B8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ulix Turner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Penelope","Description":"Penelope\r\nSOOEY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPenelope-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPenelope-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770034925/33B80CC6504ACC0083E93FAF5AE7A638A12BE453/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Penelope\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Old Major","Description":"Old Major\r\nPIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOld-Major-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOld-Major-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770039714/DE6C8EB28C4AF39AB0B789B4B8DF77157BB7CCBC/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Old Major\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Sow","Description":"The Sow\r\nPIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-Sow-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-Sow-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770044507/23CF6748CEDCC00CA7FC00B4FFE6BD3ABF0CA73B/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"The Sow\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hog Whisperer","Description":"Hog Whisperer\r\nSOOEY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FHog-Whisperer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FHog-Whisperer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770054114/61EDEB103C726FAD8899963B8D3E4009C4BC9681/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hog Whisperer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Slop Hauler","Description":"Slop Hauler\r\nSOOEY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSlop-Hauler-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSlop-Hauler-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770058132/99DBEDA923CDA8AF9E492E3C9EF192189A8B913D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Slop Hauler\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Piglet","Description":"Piglet\r\nPIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPiglet-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPiglet-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770061342/0185F3EB932A69A88787EA349CEB3F96429F6A3D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Piglet\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Squealer","Description":"Squealer\r\nPIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSquealer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSquealer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770064933/25E3F185BB3953A0CB670D76FF9C308734AFACED/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Squealer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"War Pig","Description":"War Pig\r\nPIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWar-Pig-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWar-Pig-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770069014/A763B22A97C041608B86442933470FABE0FAAA06/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"War Pig\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wild Boar","Description":"Wild Boar\r\nPIG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWild-Boar-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWild-Boar-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770072878/0469B9CABF2C05FED1853DD0EC7BD44B34738155/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Wild Boar\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Swine-Cursed","Description":"Swine-Cursed\r\nSOOEY,WIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSwine-Cursed-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSwine-Cursed-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770078995/B195B0644B1F6799B3B1993D7CAA1564006A6382/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Swine-Cursed\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Brewmaster","Description":"The Brewmaster\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-Brewmaster-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-Brewmaster-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768569344/527ED54E3FBABD799ED473BBDC766921B155266D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Brewmaster\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Apprentice Wesley","Description":"Apprentice Wesley\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FApprentice-Wesley-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FApprentice-Wesley-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768572885/452A1D74D62D4F52B4975F826834B64C5F70D820/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Apprentice Wesley\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Fingers Leong","Description":"Fingers Leong\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FFingers-Leong-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FFingers-Leong-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768578258/87DEC060DA34515FFF43955FAD4D7B4D45F5F328/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Fingers Leong\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Cooper Jones","Description":"Cooper Jones\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FCooper-Jones-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FCooper-Jones-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768581190/3BD07906E478D73B4BC68E4B5B90D6171A5F7122/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Cooper Jones\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Popcorn Turner","Description":"Popcorn Turner\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPopcorn-Turner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPopcorn-Turner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768584252/76AD3A97C6340975481EBDAEA651700E6D46A9B3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Popcorn Turner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Whiskey Golem","Description":"Whiskey Golem\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWhiskey-Golem-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWhiskey-Golem-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768588167/38A0E8338A01F6782FE91F8D60884BA56F355B90/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Whiskey Golem\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Whiskey Gamin","Description":"Whiskey Gamin\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWhiskey-Gamin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWhiskey-Gamin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768592246/C77F6AE9F8AAA071ADA2BA007631787C845E9698/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Whiskey Gamin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Moon Shinobi","Description":"Moon Shinobi\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMoon-Shinobi-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMoon-Shinobi-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768595963/ED44C01941B996854A352FE088C75F762AF8AA8A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Moon Shinobi\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Tanuki","Description":"Tanuki\r\nTRI-CHI","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTanuki-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTanuki-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768606953/696C91204FF9002F7E8736DAB4A3AA437D41A63D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Tanuki\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nexus","Description":"Nexus\r\nCADMUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FNexus-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FNexus-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=11\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435287313/33795E177DF3D6199347E00D8A214676387E9E32/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Nexus\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shambling Nest","Description":"Shambling Nest\r\nCADMUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FShambling-Nest-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FShambling-Nest-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435290447/9BB9CFDDD2E92097C63D7F84FE8693C215F348EA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Shambling Nest\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dr. Meredith Stanley","Description":"Dr. Meredith Stanley\r\nCADMUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FDr-Meredith-Stanley-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FDr-Meredith-Stanley-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435293895/241BE6F35FE550EAB097BF300EF34A407B4CC310/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dr. Meredith Stanley\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Archivist","Description":"Archivist\r\nCADMUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FArchivist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FArchivist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435298159/E0267DB236BAD75245215DDDBB9CB53F55272252/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Archivist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nightsilk Creeper","Description":"Nightsilk Creeper\r\nCADMUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FNightsilk-Creeper-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FNightsilk-Creeper-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435301125/B35B53DFE2FE9A0E2B5EF429FDDD5558D9E20204/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Nightsilk Creeper\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Spelleater","Description":"Spelleater\r\nCADMUS,WITCH HUNTER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSpelleater-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSpelleater-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529260896/7B90C0747DB18CA09050996388C8D898804717C6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Spelleater\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Eyes and Ears","Description":"Eyes and Ears\r\nCADMUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FEyes-and-Ears-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FEyes-and-Ears-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435307850/8001E5A84713389FB832E7F0E076B14A59865D1F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Eyes and Ears\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Berserker Husk","Description":"Berserker Husk\r\nCADMUS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBerserker-Husk-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBerserker-Husk-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435310765/3EF9FECEAC89B1B3AD3A6AC5C26DC231EA266CF0/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Berserker Husk\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"English Ivan","Description":"English Ivan\r\nDUA,UMBRA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FEnglish-Ivan-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FEnglish-Ivan-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=11\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435321730/D081ADD31380B34D0764C318BBFF01FEC7926869/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"English Ivan\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mr. Mordrake","Description":"Mr. Mordrake\r\nDUA,UMBRA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMr-Mordrake-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMr-Mordrake-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435325609/D4014885FB8B329CAF7A23B3040BBFFACC95F1E4/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mr. Mordrake\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gibson DeWalt","Description":"Gibson DeWalt\r\nDUA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FGibson-DeWalt-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FGibson-DeWalt-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435329452/AFFADC364A375499E47ADE5EBE174F008AB1F712/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Gibson DeWalt\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Eva Havenhand","Description":"Eva Havenhand\r\nDUA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FEva-Havenhand-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FEva-Havenhand-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435332565/3D1C0AE2CED85642DBEE8632F4342FFB06E5A198/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Eva Havenhand\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Corvis Rook","Description":"Corvis Rook\r\nDUA,SYNDICATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCorvis-Rook-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCorvis-Rook-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435336210/CEEFDE674CE62BB50D76687EC31F5F0EFA1B7035/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Corvis Rook\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Operative","Description":"Operative\r\nDUA,SYNDICATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FOperative-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FOperative-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435339877/57F55CAF21D31E82FDB1D377EE1C9E7B0F29A043/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Operative\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Brocken Spectre","Description":"Brocken Spectre\r\nUMBRA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBrocken-Spectre-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBrocken-Spectre-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435342512/D50159C6B229861284E3B42345ACFABA734F6976/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Brocken Spectre\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Daeva","Description":"Daeva\r\nUMBRA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FDaeva-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FDaeva-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435352204/F1D8F45F073E18D5F3D7FD6D12E87023BE6C378C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Daeva\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nocturne","Description":"Nocturne\r\nUMBRA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FNocturne-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FNocturne-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435355869/01BFFC33A6D9EA2376BC4D80310580C135E7699F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Nocturne\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Maxine Agassiz","Description":"Maxine Agassiz\r\nEVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMaxine-Agassiz-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMaxine-Agassiz-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=11\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435418720/82D2C21B955B1A421039D57FEC2CE573BD6AA6AF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Maxine Agassiz\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Orville Agassiz","Description":"Orville Agassiz\r\nEVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FOrville-Agassiz-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FOrville-Agassiz-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435422616/BC394AE33E8EA79BDE4E9987DE644CFDD6F5B51C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Orville Agassiz\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kiya Manimi","Description":"Kiya Manimi\r\nEVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FKiya-Manimi-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FKiya-Manimi-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435431105/45410839C89FE95F52223EF356E669154677C802/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Kiya Manimi\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Calypso Mk II","Description":"Calypso Mk II\r\nEVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCalypso-Mk-II-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCalypso-Mk-II-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435434301/403C536E4BC5899BEDB3E968D8DAAAD0F3DF9BF1/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Calypso Mk II\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Tidecaller","Description":"Tidecaller\r\nEVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FTidecaller-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FTidecaller-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=0.2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435438454/2A89515D434852C159ECF6B9EE0346B1C8D68B47/\"\r\nmodelScaleX=0.11\r\nmodelScaleY=0.11\r\nname=\"Tidecaller\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dr. Beebe","Description":"Dr. Beebe\r\nEVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FDr-Beebe-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FDr-Beebe-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435441249/F767C6CA5CD8546744FB8A16E28D9564308B3663/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dr. Beebe\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Machinist","Description":"Machinist\r\nEVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMachinist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMachinist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435447274/DC6EEAD8F461519180071BC164BE3A129A4738D7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Machinist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Harata Ngaatoro","Description":"Harata Ngaatoro\r\nEVS,PERFORMER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FHarata-Ngaatoro-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FHarata-Ngaatoro-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523915141/E7E4F03471912A8681E8F826361B932D12AF88E1/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Harata Ngaatoro\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Harpooner","Description":"Harpooner\r\nAPEX,EVS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FHarpooner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FHarpooner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435273354/7EBEE41F4C88884E7FF56F2F2E01FB40AAF8251A/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Harpooner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Anya Lycarayen","Description":"Anya Lycarayen\r\nSYNDICATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FAnya-Lycarayen-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FAnya-Lycarayen-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435458183/CE7E97C9ECA24B4E25507A6F1C88524FDFA91C56/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Anya Lycarayen\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sovereign","Description":"Sovereign\r\nSYNDICATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSovereign-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSovereign-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435466375/F740357865A8109C37C8E86F93C4542E51F28E20/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Sovereign\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Winston Finnigan","Description":"Winston Finnigan\r\nSYNDICATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FWinston-Finnigan-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FWinston-Finnigan-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435469701/F2CB0D6C476B41AB10D4A255318B3AA0F5CED966/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Winston Finnigan\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Surveyor","Description":"Surveyor\r\nSEEKER,SYNDICATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSurveyor-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSurveyor-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435410062/D7B20F96A8D5E276DD66F8D595DB44B9E36B79C5/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Surveyor\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jedza","Description":"Jedza\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FJedza-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FJedza-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=13\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435374770/190A3315F4764E60F2C4300F6F06CE9F769C5EC4/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Jedza\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sophie","Description":"Sophie\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSophie-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSophie-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435379767/4528208B1E011AD4DC2EC838C3229169D21BBB36/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Sophie\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Damned","Description":"The Damned\r\nSAVAGE,SEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FThe-Damned-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FThe-Damned-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767347773/CF49F5544202D2BF27641079A41D383B1A401BF0/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"The Damned\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Tannenbaum","Description":"Tannenbaum\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FTannenbaum-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FTannenbaum-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435387686/ED0A7EA3CD49B9181EBC352F1CC03C15BA3D5E7A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Tannenbaum\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Grave Goo","Description":"Grave Goo\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FGrave-Goo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FGrave-Goo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435391525/69A821A0150EF94944E717AC3569A0C881EB99A1/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Grave Goo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Austera and Twigge","Description":"Austera and Twigge\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FAustera-and-Twigge-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FAustera-and-Twigge-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435394020/84EF78A735A5031617D997696CAF2139ABF4ADFA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Austera and Twigge\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mikhail XVI","Description":"Mikhail XVI\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMikhail-XVI-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMikhail-XVI-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435396862/9F4ED6B100AE3ED86BF9ABD9E2CC4ABC85855D61/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mikhail XVI\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lamplighter","Description":"Lamplighter\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FLamplighter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FLamplighter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435400458/7937799D9D0557DA60AF205147D3C6A06329C825/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lamplighter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Moorwraith","Description":"Moorwraith\r\nSEEKER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMoorwraith-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMoorwraith-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435405569/D495363E19AC79FB04F00D77FEE086BE55F6E4BD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Moorwraith\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wong","Description":"Wong\r\nWIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWong-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FWong-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770091503/1751ADE121DF8F88EC00850F6AA614BA659D2B78/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Wong\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Olivia Bernard","Description":"Olivia Bernard\r\nWIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOlivia-Bernard-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FOlivia-Bernard-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770096028/BA4EC560B830F2AEF7BA9274D79964D44E040740/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Olivia Bernard\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Taxidermist","Description":"Taxidermist\r\nWIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FTaxidermist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FTaxidermist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770100365/ACE90D20F8647C549B525873A5F09BD973CCED57/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Taxidermist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Pigapult","Description":"Pigapult\r\nWIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPigapult-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FPigapult-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770106033/8954D39C5158ABA163018191D49BE1C3D427550B/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Pigapult\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Stuffed Piglet","Description":"Stuffed Piglet\r\nWIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FStuffed-Piglet-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FStuffed-Piglet-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770110411/D3B927559BEE7A997B2A6C5ACC55953E7068E3E3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Stuffed Piglet\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Alphonse LeBlanc","Description":"Alphonse LeBlanc\r\nWIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FAlphonse-LeBlanc-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FAlphonse-LeBlanc-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770115065/6CCAF2E39CA259F04422A1F9E1FF18595BD54597/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Alphonse LeBlanc\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lightning Bug","Description":"Lightning Bug\r\nWIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLightning-Bug-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FLightning-Bug-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259770118495/C26C73A95E885942D639318A5D092659D479FB37/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lightning Bug\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gautraeux Bokor","Description":"Gautraeux Bokor\r\nSWAMPFIEND,WIZZ-BANG","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGautraeux-Bokor-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGautraeux-Bokor-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767402071/4A263E933AC87E3A0AAB0472A87F3784F32E38B4/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Gautraeux Bokor\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Cornelius Basse","Description":"Cornelius Basse\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FCornelius-Basse-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FCornelius-Basse-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435488204/8B6CE88912B85704054605436BFAC7B7AE3BD8CF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Cornelius Basse\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bernadette Basse","Description":"Bernadette Basse\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FBernadette-Basse-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FBernadette-Basse-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435492068/4C6040177062B1B03CF3058716BFF2C3BD3333CA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bernadette Basse\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jonathan Reichart","Description":"Jonathan Reichart\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FJonathan-Reichart-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FJonathan-Reichart-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435495478/F9D79C4FC53746690750BC1A3674A8FF6813A54A/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Jonathan Reichart\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Paul Crockett","Description":"Paul Crockett\r\nCHIMERA,FRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FPaul-Crockett-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FPaul-Crockett-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523977364/A5F5181A0BF997DEFB6097FE230E9815B37FECA3/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Paul Crockett\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Austringer","Description":"Austringer\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAustringer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAustringer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435505016/6CA7A8E06560B633C02D267F1978254370D0281E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Austringer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Clockwork Trap","Description":"Clockwork Trap\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FClockwork-Trap-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FClockwork-Trap-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435509663/0A4781F866E8BE5D2D1E59FFB06F77A37DB34A28/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Clockwork Trap\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Frontiersman","Description":"Frontiersman\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FFrontiersman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FFrontiersman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.9\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435513820/3C591521C7B3D8715BAA1A91719F05638D532094/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Frontiersman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Pathfinder","Description":"Pathfinder\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPathfinder-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPathfinder-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435517646/4E214E1AF0960DE1EA9B1CF180013A6EE3B7CED1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Pathfinder\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sand Worm","Description":"Sand Worm\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSand-Worm-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FSand-Worm-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435526081/9B68B873CE597DD99A49C64FA7E4487961884111/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Sand Worm\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Trained Raptor","Description":"Trained Raptor\r\nFRONTIER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FTrained-Raptor-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FTrained-Raptor-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=3\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435521938/D11FA0C43F35CE97F94775C1D402C5A87E127FB6/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Trained Raptor\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lord Cooper","Description":"Lord Cooper\r\nAPEX","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FLord-Cooper-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FLord-Cooper-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=11\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435228544/23AF9A4890A18CBA986D64304323055DBC122A84/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lord Cooper\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Runaway","Description":"Runaway\r\nAPEX","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FRunaway-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FRunaway-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435241650/7A1844BD2852C3679D9A98B1BCE7A00941B93204/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Runaway\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Model 9","Description":"Model 9\r\nAPEX","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FModel-9-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FModel-9-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435247016/B0E21AD5B3A62AB327458A3C6DB2887137CB7BF3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Model 9\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ullr","Description":"Ullr\r\nAPEX","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FUllr-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FUllr-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435251980/9674BA17D4A863416B4F1F997EA2641426525656/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ullr\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Artemis","Description":"Artemis\r\nAPEX","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FArtemis-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FArtemis-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435255335/AA362AC3513D4FA945237E33B7D397C00077DA1C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Artemis\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Malisaurus Rex","Description":"Malisaurus Rex\r\nAPEX,FAE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMalisaurus-Rex-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMalisaurus-Rex-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=12\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435260532/7EDB78A45B0F17C28B7DE61E0B30C0EB7250CCAE/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Malisaurus Rex\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Crypsis Corps","Description":"Crypsis Corps\r\nAPEX","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCrypsis-Corps-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FCrypsis-Corps-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435264793/59AF4581054995C605ED1F15651E750420AD85E0/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Crypsis Corps\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Vatagi Huntsman","Description":"Vatagi Huntsman\r\nAPEX","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FVatagi-Huntsman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FVatagi-Huntsman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435269544/B24729855386E4E6F0501233932F81ADF329CAC8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Vatagi Huntsman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dawn Serpent","Description":"Dawn Serpent\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FDawn-Serpent-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FDawn-Serpent-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434547298/2D4C64DA3ABF8F24AEEB436EA81CBC464B9CE551/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Dawn Serpent\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Fuhatsu","Description":"Fuhatsu\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FFuhatsu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FFuhatsu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434551514/EB43C855D09C7A43BEE558FE2152E526F5BCBD8B/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Fuhatsu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Obsidian Statue","Description":"Obsidian Statue\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FObsidian-Statue-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FObsidian-Statue-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434563418/4F79B427CAA60C97C19628BDFD503E5C87569801/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Obsidian Statue\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lust","Description":"Lust\r\nCROSSROADS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLust-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FLust-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434555585/019FEFB0A467C46B5F5DB4096E6F8CE0A6BBA5A1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lust\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Samurai","Description":"Samurai\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSamurai-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FSamurai-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434568145/99BE4E3FF294729C58164225BEA291D2FD795D40/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Samurai\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shadow Effigy","Description":"Shadow Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShadow-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShadow-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434575251/AE5C59B135AF31659652E5D9F5A4690B33E75D7A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Shadow Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shadow Emissary","Description":"Shadow Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShadow-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FShadow-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434578060/593290C506CD571C7B4D1913736EF04E0B78AC7B/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Shadow Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ten Thunders Brother","Description":"Ten Thunders Brother\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTen-Thunders-Brother-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTen-Thunders-Brother-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434580971/351BE479D344184267970D4CBCCAA81F7FFCA059/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ten Thunders Brother\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Terracotta Warrior","Description":"Terracotta Warrior\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTerracotta-Warrior-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FTerracotta-Warrior-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434584193/7786F045F57E7FD4C6D481164BF49D0D136C7351/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Terracotta Warrior\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Lone Swordsman","Description":"The Lone Swordsman\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FThe-Lone-Swordsman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FThe-Lone-Swordsman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434587184/36A24E786175E7D70EB931C211842932B717915B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Lone Swordsman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Yasunori","Description":"Yasunori\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYasunori-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FTen Thunders%2FYasunori-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467434590380/743BA744B422D8A1EBB8956747675EE6045EF39F/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Yasunori\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Asura Roten","Description":"Asura Roten\r\nZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FAsura-Roten-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FAsura-Roten-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947135236/CDD73F01ED22EC0EF47B1E2E6AA79D3A2C3E69BE/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Asura Roten\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Carrion Effigy","Description":"Carrion Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCarrion-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCarrion-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947140392/F8B4B3371F5D64DD3AE2DF8F75827FF9C9376A04/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Carrion Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Carrion Emissary","Description":"Carrion Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCarrion-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCarrion-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947142656/1CAC359C9127ED6378E6D0C69FE961484385665F/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Carrion Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dead Rider","Description":"Dead Rider\r\nHORSEMAN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDead-Rider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDead-Rider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947148778/31AC348C3619B012EF078B58A77346FE7CF83B10/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Dead Rider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mortimer","Description":"Mortimer\r\nMORTUARY,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMortimer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMortimer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947161260/9EB8E354805235A7C1F86FAAFBD8447B070EE100/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mortimer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Grave Golem","Description":"Grave Golem\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGrave-Golem-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGrave-Golem-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947152954/F7C591C42B8F1C769646BAA462D4291F963CA716/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Grave Golem\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sloth","Description":"Sloth\r\nCROSSROADS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSloth-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSloth-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947163240/112E53B0D2807035A442D9254CF06ACE7B8D9487/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sloth\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gravedigger","Description":"Gravedigger\r\nMORTUARY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGravedigger-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FGravedigger-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947155603/834F090961C45D5D16622120B6AEEC342684FA46/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Gravedigger\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bone Pile","Description":"Bone Pile\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FBone-Pile-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FBone-Pile-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947138247/A76376F6D3C8C68A199A08DC677EE194D4AECC5C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bone Pile\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mindless Zombie","Description":"Mindless Zombie\r\nZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMindless-Zombie-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMindless-Zombie-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362947158319/F387C2443ADE70E337DA349928B880E1669BE393/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mindless Zombie\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Pride","Description":"Pride\r\nCROSSROADS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FPride-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FPride-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943306089/BD04155BC640E5EA13F02A04BAC5895BA5E31A9B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Pride\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Barbaros","Description":"Barbaros\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBarbaros-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FBarbaros-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943311762/C20B03779A83458B538104B9645256BC64E2A012/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Barbaros\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hodgepodge Effigy","Description":"Hodgepodge Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHodgepodge-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHodgepodge-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943315979/388C8C58899D5D5ABB9E55ABF32C80A7474563D5/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hodgepodge Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hodgepodge Emissary","Description":"Hodgepodge Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHodgepodge-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHodgepodge-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943319363/C76DC7E78B6AFA0183BE0BA770DEE1A4C9802272/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Hodgepodge Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Malifaux Child","Description":"Malifaux Child\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMalifaux-Child-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FMalifaux-Child-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943322363/29C02B7CCA36E6F35CC41F53566E6E46481C9598/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Malifaux Child\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hans","Description":"Hans\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHans-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FHans-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943325235/75E1F78E3249AA751B9E6BFC810D1EDF66CD27F4/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hans\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Midnight Stalker","Description":"The Midnight Stalker\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FThe-Midnight-Stalker-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FThe-Midnight-Stalker-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943328796/FBCEF050592663C42A470A4C6CB23A85F84ECA3C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Midnight Stalker\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Prospector","Description":"Prospector\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FProspector-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FOutcasts%2FProspector-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362943332136/8EFC9FEE0D68E51472ACB070C8745B4550AD36EC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Prospector\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Alpinist","Description":"Alpinist\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FAlpinist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FAlpinist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435549863/B326550A27F8F12C50FC61CB09A65ECF07459D62/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Alpinist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bellhop Porter","Description":"Bellhop Porter\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBellhop-Porter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBellhop-Porter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435553535/283A18F5B74455194675D7B44239DBC34CB3136A/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Bellhop Porter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Botanist","Description":"Botanist\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBotanist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FBotanist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435557154/A8D8E08D827B5795EA3F6F304143B6C1FB560E2B/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Botanist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hopeful Prospect","Description":"Hopeful Prospect\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FHopeful-Prospect-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FHopeful-Prospect-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435560790/2E51F11C226D1B0212D89E56BADD2BEB7D591435/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hopeful Prospect\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Intrepid Effigy","Description":"Intrepid Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FIntrepid-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FIntrepid-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435563859/D07EF1B229FCD672A9ECE42E61D0EE9CB5A43F8F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Intrepid Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Intrepid Emissary","Description":"Intrepid Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FIntrepid-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FIntrepid-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435567140/0BAD03B6EC6C564474BA11F0468B26E656212C4D/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Intrepid Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mr. Ngaatoro","Description":"Mr. Ngaatoro\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMr-Ngaatoro-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FMr-Ngaatoro-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435572675/026AF50D29132D84C2D2AB8FADC17413B8CAA526/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Mr. Ngaatoro\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Vernon and Welles","Description":"Vernon and Welles\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FVernon-and-Welles-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FExplorers Society%2FVernon-and-Welles-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098467435575052/D0A3F01E7205A0EF3F3EA1FABAEF348A16B59765/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Vernon and Welles\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mah Tucket","Description":"Mah Tucket\r\nTRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMah-Tucket-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMah-Tucket-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768495275/8C782610A4576A4E08B9F75C80EAD6070C8BB1CA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mah Tucket\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Little Lass","Description":"The Little Lass\r\nTRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-Little-Lass-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FThe-Little-Lass-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768505939/144A3E694754D0D31D2B9FDECE1B4AC013346D4C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Little Lass\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Big Brain Brin","Description":"Big Brain Brin\r\nTRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBig-Brain-Brin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBig-Brain-Brin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768513314/0B7DCF0C923875B100B10CC39F41606CFF97444D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Big Brain Brin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Trixiebelle","Description":"Trixiebelle\r\nTRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FTrixiebelle-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FTrixiebelle-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768517166/2D2224325E04FC4B6AA7566D3223BF6613D6543F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Trixiebelle\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rooster Rider","Description":"Rooster Rider\r\nTRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FRooster-Rider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FRooster-Rider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768524597/E4912D3CD0019C4E07D824000F45C71C64A3338C/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Rooster Rider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Test Subject","Description":"Test Subject\r\nTRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FTest-Subject-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FTest-Subject-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768527789/E2C07FF7824422E7B89E782C6C5AA9B68C1CA5ED/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Test Subject\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bushwhacker","Description":"Bushwhacker\r\nTRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBushwhacker-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBushwhacker-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259768534934/C7A7F591637628D2E0135FF8492DAB983E3AE972/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bushwhacker\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Soulstone Miner","Description":"Soulstone Miner\r\nMACHINA,TRICKSY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSoulstone-Miner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSoulstone-Miner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529061198/BBAE4AD7CFD56942BA774FF066155E49299E8A5C/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Soulstone Miner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Seamus","Description":"Seamus\r\nREDCHAPEL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSeamus-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FSeamus-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=11\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944025525/A66FC4207BE7C5A6006495A433B5748CAB3FC83D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Seamus\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Copycat Killer","Description":"Copycat Killer\r\nREDCHAPEL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCopycat-Killer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FCopycat-Killer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944032547/C5147659BE918D09F5E28DA40BD37F612AAF868F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Copycat Killer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Madame Sybelle","Description":"Madame Sybelle\r\nREDCHAPEL,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMadame-Sybelle-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FMadame-Sybelle-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944042695/EF1A07518C50191F587C60E7FAA6180261F6C7CD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Madame Sybelle\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bete Noire","Description":"Bete Noire\r\nREDCHAPEL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FBete-Noire-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FBete-Noire-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944046928/25E20DAE8B8EE3C64B9ABF1BD61795D0F3128C7A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bete Noire\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dead Dandy","Description":"Dead Dandy\r\nREDCHAPEL,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDead-Dandy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDead-Dandy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944051147/192F6701C08DCDFBF64AB74BE7E9264F452CDA9B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dead Dandy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dead Doxy","Description":"Dead Doxy\r\nREDCHAPEL,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDead-Doxy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FDead-Doxy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944060104/3FBF8F178B6D96B7B5D9B871997EE69331843626/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dead Doxy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rotten Belle","Description":"Rotten Belle\r\nREDCHAPEL,ZOMBIE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRotten-Belle-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FResurrectionist%2FRotten-Belle-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098362944063147/094F6BBFE6B757C482BB8A15D084E7EEEEDEF619/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rotten Belle\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Brutal Effigy","Description":"Brutal Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FBrutal-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FBrutal-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529404051/818F28F6BA199E9CE2FD7CC72DA6DF6BCB42C317/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Brutal Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Brutal Emissary","Description":"Brutal Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FBrutal-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FBrutal-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=2.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529408000/7FEFDEA4181CF4CDDFC598109636D627D00374A2/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Brutal Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dr. Grimwell","Description":"Dr. Grimwell\r\nASYLUM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDr.-Grimwell-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDr.-Grimwell-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=2.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529412939/E0FE7699E4D1BE4F1546F48171AD61332897F040/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dr. Grimwell\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Greed","Description":"Greed\r\nCROSSROADS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGreed-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGreed-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529417220/17657121ED5953D95C6CEBE7B85E7F85D21302B0/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Greed\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Guild Steward","Description":"Guild Steward\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuild-Steward-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuild-Steward-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529421295/48F5BDE90BCA20C64D60CA1210885401A166753F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Guild Steward\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nurse Heartsbane","Description":"Nurse Heartsbane\r\nASYLUM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNurse-Heartsbane-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNurse-Heartsbane-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529424920/DF8AC33CB26272E36A34BDABD906DBF88B09288C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Nurse Heartsbane\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Orderly","Description":"Orderly\r\nASYLUM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FOrderly-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FOrderly-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529428031/195BC3B4580C85A63ABB4BCBD1B78A224C9CEB71/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Orderly\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Pale Rider","Description":"Pale Rider\r\nHORSEMAN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPale-Rider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPale-Rider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529430996/ADD3EA9C12782F5785078FBE422A24AE0DC3D87B/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Pale Rider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Steam Arachnid Swarm","Description":"Steam Arachnid Swarm\r\nMACHINA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSteam-Arachnid-Swarm-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSteam-Arachnid-Swarm-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529069632/083CB907F7F25F8FD3D96FA4CF1D214F35A64F33/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Steam Arachnid Swarm\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Captain","Description":"The Captain\r\nM&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Captain-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Captain-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523702439/E797A6FBF03CB1F517731525F9B17C5F9A9E44B6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Captain\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Arcane Effigy","Description":"Arcane Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FArcane-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FArcane-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529079952/0E45329B2A8133C4A8B91215F2D07ED77F61CBEB/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Arcane Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Arcane Emissary","Description":"Arcane Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FArcane-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FArcane-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529085353/2FC2622E326F474E9C2E1F16BA66B7F5E2A34500/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Arcane Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Envy","Description":"Envy\r\nCROSSROADS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FEnvy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FEnvy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529090321/6E0B8AB28201BCE1A666159057851A758E633A89/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Envy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mechanical Rider","Description":"Mechanical Rider\r\nHORSEMAN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMechanical-Rider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMechanical-Rider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529094518/FCA43D34432A9F36808ADFB81D6FD2B7E2D97867/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Mechanical Rider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mecharachnid","Description":"Mecharachnid\r\nMACHINA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMecharachnid-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMecharachnid-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529098232/9FFE86C9BB46E36DCA8EA6000A73F066346E7830/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Mecharachnid\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Saboteur","Description":"Saboteur\r\n","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSaboteur-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSaboteur-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529101695/8D8B845E3090453E33A2A3DCB25696A9BBA51F3F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Saboteur\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Steam Arachnid","Description":"Steam Arachnid\r\nMACHINA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSteam-Arachnid-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSteam-Arachnid-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529106049/6A8166B1B99F3848ADC9CD367DE4606A252E1A39/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Steam Arachnid\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Zoraida","Description":"Zoraida\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FZoraida-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FZoraida-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767361603/C349F272FB14B650D244F921DF0409D1335B0021/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Zoraida\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Voodoo Doll","Description":"Voodoo Doll\r\nPUPPET,SWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FVoodoo-Doll-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FVoodoo-Doll-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767365721/DB1CDBAC6FD4CD01DBE82DCCCCDA0C466BB20F62/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Voodoo Doll\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Adze","Description":"Adze\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAdze-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAdze-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767370192/B9C9EE26B19D6CE39AB50B20533922AFFAB34754/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Adze\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Will o' the Wisp","Description":"Will o' the Wisp\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWill-o'-the-Wisp-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWill-o'-the-Wisp-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767377168/6F21B6A2F79953F5C9E8CA368037ACF126DF1B78/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Will o' the Wisp\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Grootslang","Description":"Grootslang\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGrootslang-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGrootslang-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767380830/BD4B3ECAD50FA39FA0D938F48E0648518B822CCD/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Grootslang\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Waldgeist","Description":"Waldgeist\r\nFAE,SWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWaldgeist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWaldgeist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767305566/3ED36398D301C87944225B5F5072D7FFDFE435F7/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Waldgeist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bad Juju","Description":"Bad Juju\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBad-Juju-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBad-Juju-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767384968/8FB1E87FEB65BC19A2E6C3AD61F282B7EEBB6FE4/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Bad Juju\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Spawn Mother","Description":"Spawn Mother\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSpawn-Mother-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSpawn-Mother-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767407940/0327F145A120AB05A0AC9727798E93DF15B77523/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Spawn Mother\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"McTavish","Description":"McTavish\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMcTavish-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FMcTavish-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767412534/9867B03A1F1F7B2CAADF6CB2122459C48745A48F/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"McTavish\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Silurid","Description":"Silurid\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSilurid-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FSilurid-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767415937/900B69FE86B1F8622CBF81EAA56221F47BB30293/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Silurid\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gupps","Description":"Gupps\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGupps-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FGupps-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767420031/3FC15D4045C48AC36A1A85C5285073261EED8833/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Gupps\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bayou Gator","Description":"Bayou Gator\r\nSWAMPFIEND","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBayou-Gator-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FBayou%2FBayou-Gator-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=5\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767423191/2E7A45221439457AA2CFAFB277EECDB57713391F/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Bayou Gator\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Pandora","Description":"Pandora\r\nWOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FPandora-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FPandora-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767197377/CA0DA8591CE73D665E1C717234342792B98B9807/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Pandora\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Candy","Description":"Candy\r\nWOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCandy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCandy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767202138/DC300D8EBE495B7F07436EA86630B8BE3D437327/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Candy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Baby Kade","Description":"Baby Kade\r\nWOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBaby-Kade-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBaby-Kade-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767206705/D0C063D461CCCAE36398074DC66E9D83FB028728/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Baby Kade\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Carver","Description":"The Carver\r\nNIGHTMARE,WOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FThe-Carver-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FThe-Carver-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529583698/D13D43DA09C8BD2AD715D04DAC804DECB0FA158D/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"The Carver\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Aversion","Description":"Aversion\r\nWOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAversion-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAversion-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767211348/1709BCDBAFE1F579C9A69A50311E152881DC4C1A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Aversion\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Poltergeist","Description":"Poltergeist\r\nWOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FPoltergeist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FPoltergeist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767215367/47B835A8F85A4EE39DBB954260721B2C45FD2292/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Poltergeist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sorrow","Description":"Sorrow\r\nWOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FSorrow-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FSorrow-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767218858/462A2D9E8B58D6CF28F3082108E177E2C6F6F57B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sorrow\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lyssa","Description":"Lyssa\r\nSAVAGE,WOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLyssa-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLyssa-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767222726/5D5C471D74309C8E30859886AC153FE99C6084F2/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lyssa\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Iggy","Description":"Iggy\r\nWILDFIRE,WOE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FIggy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FIggy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523864705/A8C3EDB06FA7B60441F084C51EFC99A9E9B12E3C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Iggy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Euripides","Description":"Euripides\r\nSAVAGE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FEuripides-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FEuripides-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=14\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767317991/882C9B548BC520E1FAB140747D117525597251EA/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Euripides\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Primordial Magic","Description":"Primordial Magic\r\nSAVAGE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FPrimordial-Magic-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FPrimordial-Magic-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767324296/7F55202E71736A9536149EA6ED819A5667BD50AB/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Primordial Magic\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Thoon","Description":"Thoon\r\nSAVAGE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FThoon-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FThoon-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767329569/7D7EB14361B978E3305803F9360EBAA07E04111D/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Thoon\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Cyclops","Description":"Cyclops\r\nSAVAGE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCyclops-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCyclops-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767333717/0E2035B6D62A0C7CDB86D2C6CDF7E88090C0B31C/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Cyclops\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Geryon","Description":"Geryon\r\nSAVAGE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGeryon-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGeryon-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.9\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767337334/6B65D573344345A835361FABFC06A5A851DFE203/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Geryon\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gigant","Description":"Gigant\r\nSAVAGE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGigant-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGigant-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767341505/19A0B01C6417C26A97E4A6D6BBD8B8DAE6E7DF3E/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Gigant\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Titania","Description":"Titania\r\nFAE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTitania-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTitania-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=14\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767280902/FA245FBCC14913C7EA11C5811BFFBBC29856EE69/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Titania\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rougarou","Description":"Rougarou\r\nFAE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FRougarou-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FRougarou-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767301696/82E7C592A78A753AAF46545F7A52CD8E84785494/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Rougarou\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bultungin","Description":"Bultungin\r\nFAE,SAVAGE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBultungin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBultungin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767297252/4447A302AAF7056D6B0EB96ECBCED98DD3EC0456/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bultungin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Autumn Knight","Description":"Autumn Knight\r\nFAE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAutumn-Knight-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAutumn-Knight-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767293959/0AA1FA75B04B1758A788B6AC92BA0056E790B462/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Autumn Knight\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Killjoy","Description":"Killjoy\r\nFAE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FKilljoy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FKilljoy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767290776/15588119EC3ABF83253B29C8AC343511086A3BFA/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Killjoy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Aeslin","Description":"Aeslin\r\nFAE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAeslin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAeslin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767287004/ACC4FDB58F825DDAE443B7C10A7DB5831C3B63CF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Aeslin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gorar","Description":"Gorar\r\nFAE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGorar-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FGorar-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767283810/22460BE1C5AD031F8CA810217609EC38251D6F69/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Gorar\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nekima","Description":"Nekima\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FNekima-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FNekima-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767236486/1A4315F3CF92CCDC29369E35F014EE2C2033E517/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Nekima\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Blood Hunter","Description":"Blood Hunter\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBlood-Hunter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBlood-Hunter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767242228/C6690F1A118B893CEB6EC41BFA31C3AF081E6B19/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Blood Hunter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hayreddin","Description":"Hayreddin\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FHayreddin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FHayreddin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767246331/0FD45FB9323BE11D389ED48E00F59478EC4B5293/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Hayreddin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lilitu","Description":"Lilitu\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLilitu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLilitu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767250270/C6D46200EE1C02F259136D1206DDD0C1DB4DD20A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lilitu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lelu","Description":"Lelu\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLelu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLelu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767254984/D172990A6EB160A45B3D7E87FB17AF3541124C2F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lelu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Black Blood Shaman","Description":"Black Blood Shaman\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBlack-Blood-Shaman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBlack-Blood-Shaman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767258797/BCC5CBCC7245E72524B6615108F96CC7091C15B5/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Black Blood Shaman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mature Nephilim","Description":"Mature Nephilim\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMature-Nephilim-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMature-Nephilim-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767262838/1B13DA3C32BB54A105649415C06B63FEC75BAD38/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Mature Nephilim\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Young Nephilim","Description":"Young Nephilim\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FYoung-Nephilim-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FYoung-Nephilim-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767270257/67A3A7197FD4CD1B5C17A8BB41BFF54846420D62/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Young Nephilim\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Terror Tot","Description":"Terror Tot\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTerror-Tot-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTerror-Tot-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767273636/FF0973C8DBE64507553A73114D06503FCF57BE3E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Terror Tot\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Corrupted Hound","Description":"Corrupted Hound\r\nNEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCorrupted-Hound-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCorrupted-Hound-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767266608/F23953DCDD1B4C90CFF99F64389FC039A381A6B2/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Corrupted Hound\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Dreamer","Description":"The Dreamer\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FThe-Dreamer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FThe-Dreamer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529561410/23FC19CC0401A85EBD115DE1DA67E1FF649751A6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Dreamer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lord Chompy Bits","Description":"Lord Chompy Bits\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLord-Chompy-Bits-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FLord-Chompy-Bits-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529567328/E57548EAF9B237EF6FCFFAFA0F07829A3B0514CC/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Lord Chompy Bits\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Serena Bowman","Description":"Serena Bowman\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FSerena-Bowman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FSerena-Bowman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529571783/C955E6E2D33531A74852BC504E1F0A380A8D1300/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Serena Bowman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Coppelius","Description":"Coppelius\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCoppelius-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FCoppelius-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529575315/02F8137FE4700CE572090DF6BDADF2CE88A737B2/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Coppelius\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Teddy","Description":"Teddy\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTeddy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTeddy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529578765/6713F9D916BC8031878A5E5E47C4F78EB73F5543/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Teddy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Widow Weaver","Description":"Widow Weaver\r\nNIGHTMARE,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWidow-Weaver-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWidow-Weaver-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529587280/4B07941F86E617B9E5E5903FBBB626206D80101D/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Widow Weaver\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bandersnatch","Description":"Bandersnatch\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBandersnatch-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBandersnatch-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529590568/590E02CD0815BB7665643C3D2B2E23C98D41D1A8/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Bandersnatch\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Stitched Together","Description":"Stitched Together\r\nNIGHTMARE,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FStitched-Together-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FStitched-Together-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529594050/99BF8C418615F6E6CAE845AE619413C4BA77CD48/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Stitched Together\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Insidious Madness","Description":"Insidious Madness\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FInsidious-Madness-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FInsidious-Madness-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529598043/3539B4245BAD22574BFFDC5E45DE69A7273B3F35/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Insidious Madness\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Alp","Description":"Alp\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAlp-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAlp-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529601043/354F994C9045990A4D95E7EDC70110FE38B7EDB6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Alp\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Daydream","Description":"Daydream\r\nNIGHTMARE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FDaydream-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FDaydream-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529603836/8A1F1DB3D9ABB01AC9EF7A704A56ACD52A6D2229/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Daydream\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sandeep Desai","Description":"Sandeep Desai\r\nACADEMIC,ELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSandeep-Desai-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSandeep-Desai-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523740603/17FB84D953FE53D4A60FCBF417447FEE5C2BAB1E/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Sandeep Desai\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Banasuva","Description":"Banasuva\r\nACADEMIC,ELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FBanasuva-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FBanasuva-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523745822/FEF3CA2C65844E87C9DB3BF3281754928D5B773F/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Banasuva\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kandara","Description":"Kandara\r\nACADEMIC,ELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FKandara-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FKandara-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523750636/9D9D5B83F17629C45C0F83174AE0F6BA0F4C6232/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Kandara\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kudra","Description":"Kudra\r\nACADEMIC,ELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FKudra-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FKudra-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523753824/19249D373876FD1BBE819C0FABDD4463A0874CA0/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Kudra\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Oxfordian Mage","Description":"Oxfordian Mage\r\nACADEMIC","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FOxfordian-Mage-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FOxfordian-Mage-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523758669/5784F411DF869AA8FB7341E6D5CDDECB78B65732/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Oxfordian Mage\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Shastar Vidiya Guard","Description":"Shastar Vidiya Guard\r\nACADEMIC","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FShastar-Vidiya-Guard-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FShastar-Vidiya-Guard-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523763346/4ECD3271399B75B6028D0A43861A91D2603F856A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Shastar Vidiya Guard\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Poison Gamin","Description":"Poison Gamin\r\nELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FPoison-Gamin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FPoison-Gamin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523769747/57E8569C55B1BF95175C33EEEF3C518636403E90/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Poison Gamin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wind Gamin","Description":"Wind Gamin\r\nELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FWind-Gamin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FWind-Gamin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523774364/E823DB6195CC50E2F2EA35505C6AB6B0DE813AB1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Wind Gamin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Essence of Power","Description":"Essence of Power\r\nELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FEssence-of-Power-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FEssence-of-Power-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523779090/94D096B664D20A18AF1C8038C7CAFA2B370911CD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Essence of Power\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Fire Gamin","Description":"Fire Gamin\r\nELEMENTAL,WILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFire-Gamin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFire-Gamin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523784368/7C7CA992064CDB1C1BC133DE0A608F96ECEA58AA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Fire Gamin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Fire Golem","Description":"Fire Golem\r\nELEMENTAL,WILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFire-Golem-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFire-Golem-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523788734/B5F72C76135BE75009E61A11341EA549348D028E/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Fire Golem\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ice Gamin","Description":"Ice Gamin\r\nDECEMBER,ELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FIce-Gamin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FIce-Gamin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523640946/19D390FE5575E2E6F1E4D76A40B510857BD37C0B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ice Gamin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ice Golem","Description":"Ice Golem\r\nDECEMBER,ELEMENTAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FIce-Golem-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FIce-Golem-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651097965847908475/3478D7C7C2CFE7922CEEC36547421542371A2027/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Ice Golem\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Kaeris","Description":"Kaeris\r\nWILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FKaeris-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FKaeris-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523825075/1604E7C337A30141E4AD3544CEC1420B4FAB0571/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Kaeris\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Eternal Flame","Description":"Eternal Flame\r\nWILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FEternal-Flame-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FEternal-Flame-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=3\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523829653/007CEE0E21F5752DE0A2D0E776E8F8301D99DAA6/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Eternal Flame\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Firestarter","Description":"The Firestarter\r\nWILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Firestarter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Firestarter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523833619/092E5FFDAF766376C918F0E9658B6163277CDE0F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Firestarter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Carlos Vasquez","Description":"Carlos Vasquez\r\nPERFORMER,WILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCarlos-Vasquez-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCarlos-Vasquez-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523838420/F339A948B088C06FABAF528AB8D15FDE1F373545/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Carlos Vasquez\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Elijah Borgmann","Description":"Elijah Borgmann\r\nWILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FElijah-Borgmann-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FElijah-Borgmann-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523843277/5AAF7E075B41E626A4A656514EFD7D16F5B6A21F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Elijah Borgmann\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Firebranded","Description":"Firebranded\r\nWILDFIRE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFirebranded-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFirebranded-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523850685/095439E96CA06A77910E40DCE1118E6DAFC4BEB6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Firebranded\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Colette Du Bois","Description":"Colette Du Bois\r\nPERFORMER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FColette-Du-Bois-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FColette-Du-Bois-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072814244/35B543FD1FEE967929606D263D781B7E5DCBDEBD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Colette Du Bois\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mechanical Dove","Description":"Mechanical Dove\r\nPERFORMER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMechanical-Dove-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMechanical-Dove-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=2\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072831195/3B3207C7F8F212AE3AB9B946F07CA20FE77F02AC/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mechanical Dove\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Angelica Durand","Description":"Angelica Durand\r\nPERFORMER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FAngelica-Durand-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FAngelica-Durand-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072809260/4BF98CF59E897A2B88330E45558E0F38E24C3FA3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Angelica Durand\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Cassandra Felton","Description":"Cassandra Felton\r\nPERFORMER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCassandra-Felton-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCassandra-Felton-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072811681/5633D8D2CA3C409A6490384AB38F4C1F8178B323/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Cassandra Felton\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ice Dancer","Description":"Ice Dancer\r\nDECEMBER,PERFORMER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FIce-Dancer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FIce-Dancer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523645925/F9D4FE5A718B6F69E0F043573DDA73D4B7077787/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ice Dancer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Coryphee","Description":"Coryphee\r\nPERFORMER,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCoryphee-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCoryphee-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072826800/D147109D638BFDFC5E80BBBF1F9B3EEBC912B78D/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Coryphee\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Coryphee Duet","Description":"Coryphee Duet\r\nPERFORMER,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCoryphee-Duet-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCoryphee-Duet-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072828286/56EF8E99C9CC5E6C0CA28F40D38B104FD098C9F5/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Coryphee Duet\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mannequin","Description":"Mannequin\r\nPERFORMER,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMannequin-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMannequin-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072824893/53E02301E58BA8E9D4CE91244D00EE70DC027364/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mannequin\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Showgirl","Description":"Showgirl\r\nPERFORMER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FShowgirl-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FShowgirl-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971329072834144/E6212DAA35AE8DBA5C9CF3DD5BF55CE343C48472/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Showgirl\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Marcus","Description":"Marcus\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMarcus-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMarcus-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523930634/CB8C170199832BA96C3568FF321BFFFFA0E3B089/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Marcus\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Jackalope","Description":"Jackalope\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FJackalope-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FJackalope-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523934075/F967A5ECB84766899619A39E105F18E7A0B3277B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Jackalope\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Myranda","Description":"Myranda\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMyranda-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMyranda-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523938247/D798410F6C3F7E1AB7608CB035C16A2874DFBB10/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Myranda\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Ferdinand Vogel","Description":"Ferdinand Vogel\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFerdinand-Vogel-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFerdinand-Vogel-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523941216/6144A1EF0E4AD127710AB18B7019375DE66DF00A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Ferdinand Vogel\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Cojo","Description":"Cojo\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCojo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FCojo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=11\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523944208/57DA1E81442F0E81A29E9C12A1087173BA44CCBE/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Cojo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Scorpius","Description":"The Scorpius\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Scorpius-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Scorpius-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523949306/295C0A47AE23854BC34D4D541FD90CA90ABC761A/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"The Scorpius\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Moleman","Description":"Moleman\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMoleman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMoleman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523953925/93D8AD1698B1910595B4ACBACB162E387B123C17/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Moleman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Order Initiate","Description":"Order Initiate\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FOrder-Initiate-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FOrder-Initiate-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523958265/40278D25A10837105EDC8BA1BF4C76C7A8E9A85B/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Order Initiate\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sabertooth Cerberus","Description":"Sabertooth Cerberus\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSabertooth-Cerberus-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSabertooth-Cerberus-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523981371/360732B553673B3BEADC4F9280B71FD1EA2C052A/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Sabertooth Cerberus\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Slate Ridge Mauler","Description":"Slate Ridge Mauler\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSlate-Ridge-Mauler-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSlate-Ridge-Mauler-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523985490/54C0C803B109DBF7FA017FFCCC0709C15A80B924/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Slate Ridge Mauler\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Beast Within","Description":"The Beast Within\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Beast-Within-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FThe-Beast-Within-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=1.1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523989045/6E8BA9E9091C3822BDC1DF1AD42BD90114506ED8/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"The Beast Within\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Razorspine Rattler","Description":"Razorspine Rattler\r\nCHIMERA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FRazorspine-Rattler-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FRazorspine-Rattler-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523992732/CE922E64DD6A72DBBD5BBCC09272945F6A1CBE4A/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Razorspine Rattler\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Toni Ironsides","Description":"Toni Ironsides\r\nM&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FToni-Ironsides-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FToni-Ironsides-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=14\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523671473/C5853E43529C0153BC162894DDF4058491109922/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Toni Ironsides\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mouse","Description":"Mouse\r\nM&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMouse-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMouse-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523682547/3A728904BBBAEA8CD6C309BB2A4EF42D9241D3E3/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mouse\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Fitzsimmons","Description":"Fitzsimmons\r\nM&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFitzsimmons-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FFitzsimmons-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523691864/51B69D4B6317880D644333E83A9BA00634ED4571/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Fitzsimmons\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Amina Naidu","Description":"Amina Naidu\r\nM&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FAmina-Naidu-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FAmina-Naidu-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523698180/48ED84ADFEF0AEE63462F2BD51AD08A22E92D82F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Amina Naidu\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Union Miner","Description":"Union Miner\r\nM&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FUnion-Miner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FUnion-Miner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523705810/8E735310D1C169597F93459B26F28B4A6E33039A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Union Miner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Gunsmith","Description":"Gunsmith\r\nM&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FGunsmith-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FGunsmith-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523711131/E1897C495AFA670818D3CA0A070ECE7C8E502CB9/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Gunsmith\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Union Steamfitter","Description":"Union Steamfitter\r\nAUGMENTED,M&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FUnion-Steamfitter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FUnion-Steamfitter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523715834/AC402C7A5A12058E7ABFBDB2778100C007A92F77/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Union Steamfitter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Howard Langston","Description":"Howard Langston\r\nAUGMENTED,M&SU","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FHoward-Langston-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FHoward-Langston-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523720872/DBE83E884F38985DFD2EE1707187C79B09CBE4AB/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Howard Langston\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rasputina","Description":"Rasputina\r\nDECEMBER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FRasputina-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FRasputina-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971635807114806/5A0E7EA96C338B8459BEB0DEA322559C65351FD7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rasputina\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wendigo","Description":"Wendigo\r\nDECEMBER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FWendigo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FWendigo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523598362/003CC84FC0780B2D73F7D17EC90ED1A92DCA241F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Wendigo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Snow Storm","Description":"Snow Storm\r\nDECEMBER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSnow-Storm-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSnow-Storm-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651097965847920975/2BE38D6CC749B10B0C72D61D475157B478E4D683/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Snow Storm\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Silent One","Description":"Silent One\r\nDECEMBER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSilent-One-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FSilent-One-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523613818/32AB39C2458D426E5CDEE73514B2170BA9915D8A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Silent One\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hoarcat","Description":"Hoarcat\r\nDECEMBER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FHoarcat-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FHoarcat-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523617883/AC11F2831174FD1B0F3406B628BB4C75F8017A1F/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Hoarcat\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"December Acolyte","Description":"December Acolyte\r\nDECEMBER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FDecember-Acolyte-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FDecember-Acolyte-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1649971635807164609/EEB7F8BC847613EA0C5E4791CF7C51520A8AC74B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"December Acolyte\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Blessed of December","Description":"Blessed of December\r\nDECEMBER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FBlessed-of-December-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FBlessed-of-December-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523629786/ABFE63CCEC1F36DC30C5D85642BBC35549A8C9C5/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Blessed of December\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Charles Hoffman","Description":"Charles Hoffman\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FCharles-Hoffman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FCharles-Hoffman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523551401/E3DD831853E5965447070046A89BC2C44A1FBE69/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Charles Hoffman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mechanical Attendant","Description":"Mechanical Attendant\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMechanical-Attendant-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMechanical-Attendant-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116523580752/506D89381AB1489691E9C0D63AA33CF806E06F90/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mechanical Attendant\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Melissa K.O.R.E.","Description":"Melissa K.O.R.E.\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMelissa-K.O.R.E-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMelissa-K.O.R.E-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524795839/0001118B9332F84BAB5E9047930D01FFD7A014E2/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Melissa K.O.R.E.\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Peacekeeper","Description":"Peacekeeper\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPeacekeeper-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPeacekeeper-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524801840/13392F57CCB2D35891ED0E339A4B1EB1F4D8E072/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Peacekeeper\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Riotbreaker","Description":"Riotbreaker\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FRiotbreaker-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FRiotbreaker-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=6\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524807108/3378BC3D5D6A438D3666A3030055AEAB217BA868/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Riotbreaker\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Guardian","Description":"Guardian\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuardian-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuardian-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524814867/53A1567F89200CC2AB8741DD46C5D1B32C0B0F9E/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Guardian\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hunter","Description":"Hunter\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FHunter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FHunter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524818582/EDCC600E0ED729746B31FB6283B2937C686E3DBA/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Hunter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Warden","Description":"Warden\r\nAUGMENTED,GUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWarden-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWarden-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=5\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524822488/D2D4CC15D38A93D3271C45313728AE0243217F43/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Warden\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Watcher","Description":"Watcher\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWatcher-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWatcher-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524826332/06C25C3E34F892D1F37627F4B1AB6DD2770CCF3D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Watcher\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mobile Toolkit","Description":"Mobile Toolkit\r\nAUGMENTED,MACHINA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMobile-Toolkit-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMobile-Toolkit-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524830373/1F5C1CA98900CFFE7E251AED927DE968ABCC55C8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mobile Toolkit\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Medical Automaton","Description":"Medical Automaton\r\nAUGMENTED","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMedical-Automaton-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FMedical-Automaton-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524835734/81455E26BE005FEFCDA73859D8E1826C0B9BA49C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Medical Automaton\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Joss","Description":"Joss\r\nAUGMENTED,MACHINA","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FJoss-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FArcanists%2FJoss-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116524839681/C48210B9F391CAB47B5B6B7D0A8AF4C0D2F0E90F/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Joss\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Dashel Barker","Description":"Dashel Barker\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDashel-Barker-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDashel-Barker-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529177677/8C5851E9074B2C53BDC10CE3E7E7F9B050F80752/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Dashel Barker\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Dispatcher","Description":"The Dispatcher\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Dispatcher-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Dispatcher-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529181514/9BFBD327ADE6A63BAED06798DBB1A77FF32BE108/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Dispatcher\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Guild Hound","Description":"Guild Hound\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuild-Hound-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuild-Hound-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529192454/54C33F60ADCC3F346D0E635493CE21DDBAC3E738/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Guild Hound\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Guard Patrol","Description":"Guard Patrol\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuard-Patrol-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuard-Patrol-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529189367/1AAC08ECE1D0766F4B8E7E02200BD78F4096FAAD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Guard Patrol\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Taggart Queeg","Description":"Taggart Queeg\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FTaggart-Queeg-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FTaggart-Queeg-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529185506/BDA35BDA35380721DBFABD678B8D13367EBAD04C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Taggart Queeg\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sergeant","Description":"Sergeant\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSergeant-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSergeant-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529203451/BBFCD11FB1C2C07AF103E21ECCF13FBEFFEF3D0E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sergeant\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Rifleman","Description":"Rifleman\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FRifleman-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FRifleman-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529200623/FAFEE9BECDF81C7758F161F6A7B921508F0C502B/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Rifleman\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Executioner","Description":"Executioner\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FExecutioner-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FExecutioner-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=9\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529212520/A1F7357AED399D11F38A81DB15C500F529EB28E4/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Executioner\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mounted Guard","Description":"Mounted Guard\r\nGUARD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMounted-Guard-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMounted-Guard-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529196268/29B039E297F653655C0744C3960E16F986F06BA9/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Mounted Guard\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nellie Cochrane","Description":"Nellie Cochrane\r\nJOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNellie-Cochrane-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNellie-Cochrane-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529316958/2169C060439784D3D09CE8357FA9FEA3BC64F539/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Nellie Cochrane\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"False Witness","Description":"False Witness\r\nELITE,JOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FFalse-Witness-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FFalse-Witness-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.6\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529320228/BBFD980AC27DDA460B7552DE64B5086ED5BDCEB0/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"False Witness\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Printing Press","Description":"The Printing Press\r\nJOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Printing-Press-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Printing-Press-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=4\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529325318/37EF25577C473F404E093DD5F1E2C966F5E4015E/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"The Printing Press\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Allison Dade","Description":"Allison Dade\r\nJOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAllison-Dade-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAllison-Dade-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529330346/0FE766C417088FE50B3423966808C49E91DCB101/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Allison Dade\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Phiona Gage","Description":"Phiona Gage\r\nJOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPhiona-Gage-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPhiona-Gage-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529334398/F463691F46AF97D351EFE062CFEFCD8AF2845AED/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Phiona Gage\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Field Reporter","Description":"Field Reporter\r\nJOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FField-Reporter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FField-Reporter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529338787/C50B75F782253310C876C575B380EFC0668E58F8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Field Reporter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Newsie","Description":"Newsie\r\nJOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNewsie-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNewsie-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529341861/223E0FE5B948B228D3D6F4C477216693F0615FCD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Newsie\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Undercover Reporter","Description":"Undercover Reporter\r\nJOURNALIST","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FUndercover-Reporter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FUndercover-Reporter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529344693/367E032E160EE34AD51FFAC050368B6CC17E0031/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Undercover Reporter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Pistolero De Latigo","Description":"Pistolero De Latigo\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPistolero-De-Latigo-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPistolero-De-Latigo-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529157216/52C6D796AD05409D6C8526D69EDCC9A7F276015E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Pistolero De Latigo\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Santiago Ortega","Description":"Santiago Ortega\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSantiago-Ortega-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSantiago-Ortega-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529137078/EB230D004ED1B92D5709128C044D69E017399E68/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Santiago Ortega\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Monster Hunter","Description":"Monster Hunter\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMonster-Hunter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FMonster-Hunter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529153868/5D34B8DDB809CFB73F5907F40255435379558CCD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Monster Hunter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Francisco Ortega","Description":"Francisco Ortega\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FFrancisco-Ortega-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FFrancisco-Ortega-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529133236/2875D7DA130426E0A102FD746CD4942AE47685E8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Francisco Ortega\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Enslaved Nephilim","Description":"Enslaved Nephilim\r\nFAMILY,NEPHILIM","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FEnslaved-Nephilim-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FEnslaved-Nephilim-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529129024/FA9FBB1CC859CF305AF621D89794A6EDE9B729CD/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Enslaved Nephilim\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Papa Loco","Description":"Papa Loco\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPapa-Loco-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPapa-Loco-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529149527/BD241E5CCDF0841935E394E36D2484D787643E89/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Papa Loco\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Nino Ortega","Description":"Nino Ortega\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNino-Ortega-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FNino-Ortega-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529145349/D99ED5C2AF936ACFA81E615B9C115068539DBDA8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Nino Ortega\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Abuela Ortega","Description":"Abuela Ortega\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAbuela-Ortega-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAbuela-Ortega-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529141354/AA5AF86B2B0BF95A71649456136D4099B5905F32/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Abuela Ortega\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Perdita Ortega","Description":"Perdita Ortega\r\nFAMILY","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPerdita-Ortega-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPerdita-Ortega-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529123467/9AC5CE8E3E28FD5C2F3388DE3B099EBBEB156955/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Perdita Ortega\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lady Justice","Description":"Lady Justice\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FLady-Justice-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FLady-Justice-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529271567/0FB525A7BC2C0286C88C894C3EE7CFEDB822F6F7/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lady Justice\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Scales of Justice","Description":"Scales of Justice\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FScales-of-Justice-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FScales-of-Justice-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529276444/35846E8B38515575AC29084CA653D2D7333808C6/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Scales of Justice\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Judge","Description":"The Judge\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Judge-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Judge-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529283979/5999A9BA20D6C3082C274EF49846642C01C407E5/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Judge\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Death Marshal","Description":"Death Marshal\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDeath-Marshal-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDeath-Marshal-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529290831/61F90895A992E4475CBC2F9DE1BFED380ADF1F60/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Death Marshal\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Domador De Cadaveres","Description":"Domador De Cadaveres\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDomador-De-Cadaveres-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDomador-De-Cadaveres-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529299099/F458F0DFB1000BDAF7F0B66E7BDB47783842C618/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Domador De Cadaveres\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Exorcist","Description":"Exorcist\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FExorcist-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FExorcist-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529302117/1C7C186233F968143507C31429BFE259923D998D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Exorcist\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Jury","Description":"The Jury\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Jury-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Jury-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529279696/204F810ECD38654E0E2F34BFCB9848A58F4EF1A6/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"The Jury\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Death Marshal Recruiter","Description":"Death Marshal Recruiter\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDeath-Marshal-Recruiter-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FDeath-Marshal-Recruiter-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=2.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529295596/AD889FE9481B80D0CE697F9A1945847DA85AF384/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Death Marshal Recruiter\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Lone Marshal","Description":"The Lone Marshal\r\nMARSHAL","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Lone-Marshal-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Lone-Marshal-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529287172/887EE5B50701EA3CC4342C81E6F06559D18C8C53/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"The Lone Marshal\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sanctioned Spellcaster","Description":"Sanctioned Spellcaster\r\nWITCH HUNTER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSanctioned-Spellcaster-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSanctioned-Spellcaster-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529256638/5502AF59810402A4C2AB323B21E03009FDB97174/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sanctioned Spellcaster\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Thalarian Queller","Description":"Thalarian Queller\r\nWITCH HUNTER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThalarian-Queller-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThalarian-Queller-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529252782/A727F25278C3F88779D6B39C3DF22D9CAA94CFA8/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Thalarian Queller\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Witchling Handler","Description":"Witchling Handler\r\nWITCH HUNTER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWitchling-Handler-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWitchling-Handler-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529248307/DBC9FFF6292AD0FA841CA36DF1D0898F490985FA/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Witchling Handler\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Samael Hopkins","Description":"Samael Hopkins\r\nWITCH HUNTER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSamael-Hopkins-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSamael-Hopkins-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529237352/E58C3A0DFDE4E87E0998AB213B4BE47965E578B1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Samael Hopkins\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Purifying Flame","Description":"Purifying Flame\r\nWITCH HUNTER,WITCHLING","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPurifying-Flame-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FPurifying-Flame-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529233685/5050C11477BFB5D94E588C2B84545DA7643FC949/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Purifying Flame\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Sonnia Criid","Description":"Sonnia Criid\r\nWITCH HUNTER","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSonnia-Criid-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FSonnia-Criid-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=12\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529228978/72AE9D9213743D42EF466E1736B63F4D5A58D16E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Sonnia Criid\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Witchling Stalker","Description":"Witchling Stalker\r\nWITCH HUNTER,WITCHLING","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWitchling-Stalker-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWitchling-Stalker-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529241007/5217420594A0572D1CC526FD923398441CE7D6B9/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Witchling Stalker\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Witchling Thrall","Description":"Witchling Thrall\r\nWITCH HUNTER,WITCHLING","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWitchling-Thrall-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FWitchling-Thrall-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=8\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529244851/EF86861E697F4C351583B7347B4F461853D85311/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Witchling Thrall\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Lucius Mattheson","Description":"Lucius Mattheson\r\nELITE,MIMIC","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FLucius-Mattheson-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FLucius-Mattheson-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=10\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529360921/5324DF40BF147AC1F3402473799C6C13B86111AF/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Lucius Mattheson\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"The Scribe","Description":"The Scribe\r\nELITE,MIMIC","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Scribe-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FThe-Scribe-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529366722/63F560DD26244105FA1844320793DB869D8974A9/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"The Scribe\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Alan Reid","Description":"Alan Reid\r\nELITE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAlan-Reid-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAlan-Reid-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529370693/0CF6542B4D3D1C257183E93F4E7E5E31F30B1027/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Alan Reid\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Agent 46","Description":"Agent 46\r\nELITE,MIMIC","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAgent-46-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FAgent-46-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529376361/58C176B709BD5586AD7B3A80643A20B6E0FB778C/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Agent 46\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Guild Lawyer","Description":"Guild Lawyer\r\nELITE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuild-Lawyer-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FGuild-Lawyer-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=6\r\nimageScale=1.8\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529381045/73864E0EFA8663F75B9306305479556FEBF629B1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Guild Lawyer\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Investigator","Description":"Investigator\r\nELITE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FInvestigator-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FGuild%2FInvestigator-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.7\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529385565/B84A72CF851D2EDAC6DE9DCB5490BB462F7B28C1/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Investigator\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Changeling","Description":"Changeling\r\nMIMIC","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FChangeling-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FChangeling-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.2\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529388726/28B4B8317AEE5B73FEF06EA6E11BBF11D15995E4/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Changeling\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Doppleganger","Description":"Doppleganger\r\nMIMIC","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FDoppleganger-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FDoppleganger-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=8\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098116529393582/17E32B64083B095C50E1D4159FD1BF119AB05512/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Doppleganger\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wicked Doll","Description":"Wicked Doll\r\nPUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWicked-Doll-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWicked-Doll-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=3\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767485345/869E7C650484D03B68EF0A96244CF32BA0F1948A/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Wicked Doll\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Wrath","Description":"Wrath\r\nCROSSROADS","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWrath-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FWrath-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.6\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767481317/EB1EAF96ACF7CC0E7C3B668CFBD06CB284348E0D/\"\r\nmodelScaleX=0.88\r\nmodelScaleY=0.88\r\nname=\"Wrath\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Maurice","Description":"Maurice\r\nHALF-BLOOD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMaurice-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMaurice-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767468806/257CDB8E665346FA594C0B0495B0B4EB23DF9454/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Maurice\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Bloodwretch","Description":"Bloodwretch\r\nHALF-BLOOD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBloodwretch-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FBloodwretch-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=5\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767461847/FC637563DEDF2CE3EFE021F2653A37260B6E0F21/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Bloodwretch\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Angel Eyes","Description":"Angel Eyes\r\nHALF-BLOOD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAngel-Eyes-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FAngel-Eyes-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=9\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767457979/7CCC9A4FF417F1850167F1C4D36776BCDC05DE80/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Angel Eyes\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mysterious Effigy","Description":"Mysterious Effigy\r\nEFFIGY,PUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMysterious-Effigy-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMysterious-Effigy-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=4\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767471231/CC8D73C18D208CAFBC924C60F5CAE03C72645C2E/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Mysterious Effigy\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Mysterious Emissary","Description":"Mysterious Emissary\r\nEMISSARY OF FATE","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMysterious-Emissary-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FMysterious-Emissary-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=10\r\nimageScale=1.3\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767474059/554AD0898C23910ECF8BAE926AFC61E3E5883D6C/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Mysterious Emissary\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Tuco Ortega","Description":"Tuco Ortega\r\nHALF-BLOOD","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTuco-Ortega-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FTuco-Ortega-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767477349/E1194FDEC642C10A11A48726793D279AE3CDEF96/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Tuco Ortega\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Hooded Rider","Description":"Hooded Rider\r\nHORSEMAN","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FHooded-Rider-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FHooded-Rider-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=2\r\nhealth=9\r\nimageScale=1.4\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767465279/0E80DC2AC71483A0938D365F7411A71E8C13E33E/\"\r\nmodelScaleX=1.1\r\nmodelScaleY=1.1\r\nname=\"Hooded Rider\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]},{"GUID":"203c09","Name":"Custom_Tile","Transform":{"posX":0,"posY":0,"posZ":0,"rotX":0,"rotY":180,"rotZ":0,"scaleX":2.5,"scaleY":1,"scaleZ":2.5},"Nickname":"Vasilisa","Description":"Vasilisa\r\nPUPPET","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":false,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FVasilisa-front-0.jpg?alt=media","ImageSecondaryURL":"https://firebasestorage.googleapis.com/v0/b/m3e-crew-builder-22534.appspot.com/o/cards%2FNeverborn%2FVasilisa-back.jpg?alt=media","ImageScalar":1,"WidthScale":0,"CustomTile":{"Type":3,"Thickness":0.1,"Stackable":true,"Stretch":true}},"LuaScript":"\r\n\r\nmini = nil\r\n\r\nbaseScale=1.2\r\nhealth=7\r\nimageScale=1.5\r\nmodelImage=\"http://cloud-3.steamusercontent.com/ugc/1651098259767449695/9ED8401B4B8DACE8465048EE03E0D3C120281A5D/\"\r\nmodelScaleX=0.66\r\nmodelScaleY=0.66\r\nname=\"Vasilisa\"\r\n\r\nprototypes = {\r\n    base = '000000',\r\n}\r\n\r\nfunction createModel()\r\n    local pos = self.getPosition()\r\n    pos = {x=pos.x, y=pos.y + 2, z=pos.z+2}\r\n\r\n    if mini ~= nil then\r\n        pos = mini.getPosition()\r\n        pos = {x=pos.x, y=pos.y + 2, z=pos.z}\r\n        mini.destruct()\r\n    end\r\n    objectData =  self.getData()\r\n\r\n    -- print('NickName: ',objectData.Nickname)\r\n    -- print('Desc: ',objectData.Description)\r\n    -- print('Color: ',objectData.ColorDiffuse.r,objectData.ColorDiffuse.g,objectData.ColorDiffuse.b)\r\n    -- print('Image: ',objectData.CustomImage.ImageURL)\r\n    \r\n    modelPrototype = getObjectFromGUID(prototypes.base)\r\n    model = modelPrototype.clone({position=pos})\r\n\r\n    model.setScale({x=baseScale, y=1, z=baseScale})\r\n    attachments = model.getAttachments()\r\n    for key,value in pairs(attachments) do\r\n        modelElement = model.removeAttachment(0)\r\n        modelElement.setCustomObject({\r\n            image = modelImage,\r\n            image_secondary = modelImage,\r\n            image_scalar = imageScale\r\n        })\r\n        modelElement.setScale({x=modelScaleX, y=modelScaleY, z=0.2})\r\n        model.addAttachment(modelElement)\r\n    end\r\n    model.setDescription(objectData.Description)\r\n    model.setName(objectData.Nickname)\r\n    model.script_state =  \"{\\\"bars\\\":[[\\\"Health\\\",\\\"#55aa22\\\",\" ..health ..\",\" ..health..\",true,true]],\\\"markers\\\":[]}\"\r\n    --  {bars={{'Health','#55aa22',health,health,true,true}},markers={}}\r\n    \r\n    mini = model\r\n    -- end\r\nend\r\n\r\nfunction ui_pingmini(player)\r\n    if (mini ~= nil) then\r\n        if (player.pingTable ~= nil) then\r\n            player.pingTable(mini.getPosition())\r\n        end\r\n    end\r\nend\r\n\r\nfunction rebuildAssets()\r\n    local root = 'https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/';\r\n    local assets = {\r\n        {name='ui_power', url=root..'power.png'},\r\n        {name='ui_gear', url=root..'gear.png'},\r\n        {name='ui_close', url=root..'close.png'},\r\n        {name='ui_plus', url=root..'plus.png'},\r\n        {name='ui_minus', url=root..'minus.png'},\r\n        {name='ui_reload', url=root..'reload.png'},\r\n        {name='ui_location', url=root..'location.png'},\r\n        {name='ui_bars_new', url=root..'bars_new.png'},\r\n        {name='ui_arrow_u', url=root..'arrow_u.png'},\r\n        {name='ui_arrow_d', url=root..'arrow_d.png'},\r\n        {name='ui_arrow_l', url=root..'arrow_l.png'},\r\n        {name='ui_arrow_r', url=root..'arrow_r.png'},\r\n    }\r\n\r\n    assetBuffer = {}\r\n    local bufLen = 0\r\n    for idx,guid in pairs(mapI2G) do\r\n        local mini = getObjectFromGUID(guid)\r\n        if (mini ~= nil) then\r\n            for i,marker in pairs(mini.call('getMarkers', {})) do\r\n                if (assetBuffer[marker.url] == nil) then\r\n                    bufLen = bufLen + 1\r\n                    assetBuffer[marker.url] = self.guid..'_mk_'..bufLen\r\n                    table.insert(assets, {name=self.guid..'_mk_'..bufLen, url=marker.url})\r\n                end\r\n            end\r\n        end\r\n    end\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction rebuildUI()\r\n    \r\n    local ui = {\r\n        {tag='Defaults', children={\r\n            {tag='Text', attributes={color='#cccccc', fontSize='18', alignment='MiddleLeft'}},\r\n            {tag='InputField', attributes={fontSize='24', preferredHeight='40'}},\r\n            {tag='ToggleButton', attributes={fontSize='18', preferredHeight='40', colors='#ffcc33|#ffffff|#808080|#606060', selectedBackgroundColor='#dddddd', deselectedBackgroundColor='#999999'}},\r\n            {tag='Button', attributes={fontSize='12',textColor='#111111', preferredHeight='40', colors='#dddddd|#ffffff|#808080|#f6f6f6'}},\r\n            {tag='Toggle', attributes={textColor='#cccccc'}},\r\n        }},\r\n        \r\n        {tag='button', attributes={onClick='ui_pingmini', image='ui_location',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='20', height='20', position='-40 -110 -5', rotation='0 0 180' }},\r\n        {tag='button', attributes={onClick='createModel',text='Spawn Model',  colors='#ccccccff|#ffffffff|#404040ff|#808080ff', width='120', height='20', position='0 110 -5', rotation='0 0 180' }} \r\n    }\r\n    \r\n    self.UI.setXmlTable(ui)\r\nend\r\n\r\nfunction onSave()\r\n    miniguid = ''\r\n    if mini ~= nil then\r\n        miniguid = mini.getGUID()\r\n    end\r\n    local save = {\r\n     mini = miniguid\r\n    }\r\n    return JSON.encode(save)\r\nend\r\n\r\n\r\nfunction onLoad(save)\r\n    local data = JSON.decode(save)\r\n    mini = getObjectFromGUID(data.mini)\r\n    rebuildUI()\r\nend\r\n\r\n","LuaScriptState":"{\"mini\":\"000001\"}","XmlUI":"","CustomUIAssets":[{"Name":"ui_location","URL":"https://raw.githubusercontent.com/RobMayer/TTSLibrary/master/ui/location.png"}]}],"ChildObjects":[{"GUID":"43446f","Name":"Custom_Token","Transform":{"posX":-0.0247988682,"posY":-9.23480854e-7,"posZ":0.006368118,"rotX":2.380204e-20,"rotY":-7.32878e-7,"rotZ":3.72164669e-12,"scaleX":0.296851128,"scaleY":15,"scaleZ":0.2918444},"Nickname":"Neverborn Scheme Marker","Description":"","GMNotes":"","ColorDiffuse":{"r":1,"g":1,"b":1},"LayoutGroupSortIndex":0,"Locked":true,"Grid":true,"Snap":true,"IgnoreFoW":false,"MeasureMovement":false,"DragSelectable":true,"Autoraise":true,"Sticky":true,"Tooltip":true,"GridProjection":false,"HideWhenFaceDown":false,"Hands":false,"CustomImage":{"ImageURL":"http://cloud-3.steamusercontent.com/ugc/1009312139319050497/E06BC43807CD7F9DB214C0F2B6220351E3DE04B2/","ImageSecondaryURL":"","ImageScalar":1,"WidthScale":0,"CustomToken":{"Thickness":0.1,"MergeDistancePixels":15,"StandUp":false,"Stackable":false}},"LuaScript":"","LuaScriptState":"","XmlUI":""}]}]}